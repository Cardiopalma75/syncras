<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pompa di calore vs caldaia a gas: calcolatore risparmio e ROI | Syncras.App</title>
  <meta name="description" content="Confronta il costo annuo di riscaldamento con caldaia a gas e pompa di calore. Inserisci i tuoi dati reali o stimati e scopri risparmio annuo, ROI e convenienza con le agevolazioni fiscali.">
  <meta name="robots" content="index,follow">
  <link rel="canonical" href="https://syncras.app/calcolatore-pompa-di-calore-vs-gas.html">

  <style>
    :root {
      --violet-main: #6C5CE7;
      --violet-dark: #4B3ACB;
      --violet-soft: #A29BFE;
      --text-main: #403E43;
      --bg-page: #F7F7FB;
    }

    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: var(--bg-page);
      color: var(--text-main);
      line-height: 1.6;
    }

    /* HEADER */

    .site-header {
      background: linear-gradient(90deg, var(--violet-dark), var(--violet-main));
      color: white;
      padding: 12px 14px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.15);
    }

    .header-inner {
      max-width: 1180px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
    }

    .logo {
      font-size: 1.4rem;
      font-weight: bold;
      letter-spacing: 0.03em;
    }

    #main-nav {
      display: flex;
      gap: 18px;
      font-size: 0.95rem;
    }

    #main-nav a {
      color: white;
      text-decoration: none;
      font-weight: 600;
      padding-bottom: 2px;
      border-bottom: 2px solid transparent;
    }

    #main-nav a:hover {
      text-decoration: underline;
    }

    #main-nav a.active {
      border-bottom-color: rgba(255,255,255,0.9);
    }

    .menu-toggle {
      display: none;
      background: rgba(255,255,255,0.12);
      border: 1px solid rgba(255,255,255,0.4);
      border-radius: 6px;
      color: white;
      padding: 6px 10px;
      font-size: 0.9rem;
      cursor: pointer;
    }

    .menu-toggle span {
      margin-left: 4px;
      font-size: 1.1rem;
    }

    @media (max-width: 768px) {
      #main-nav {
        display: none;
        position: absolute;
        left: 0;
        right: 0;
        top: 56px;
        margin: 0 auto;
        max-width: 1180px;
        flex-direction: column;
        background-color: var(--violet-dark);
        padding: 10px 16px 12px 16px;
        border-radius: 0 0 8px 8px;
        box-shadow: 0 3px 6px rgba(0,0,0,0.25);
        z-index: 50;
      }

      #main-nav a {
        padding: 6px 0;
      }

      body.nav-open #main-nav {
        display: flex;
      }

      .menu-toggle {
        display: inline-flex;
        align-items: center;
      }
    }

    /* MAIN */

    main {
      max-width: 1180px;
      margin: 30px auto;
      padding: 20px;
      background-color: #ffffff;
      border-radius: 10px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.08);
    }

    h1, h2, h3 {
      color: var(--violet-dark);
      margin-top: 0;
    }

    .page-intro {
      margin-bottom: 20px;
      border-bottom: 1px solid #e5e7eb;
      padding-bottom: 10px;
    }

    .badge-page {
      display: inline-block;
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      background: rgba(108, 92, 231, 0.08);
      border: 1px solid rgba(108, 92, 231, 0.35);
      border-radius: 999px;
      padding: 2px 8px;
      color: #3730a3;
      margin-bottom: 8px;
    }

    .intro-text {
      font-size: 0.95rem;
      color: #4b5563;
    }

    /* GRIGLIA CARD INFO */

    .calc-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 18px;
      margin: 18px 0 26px;
    }

    .calc-card {
      background: #f4f5ff;
      border-radius: 16px;
      padding: 16px 18px 14px;
      border: 1px solid #d4d7ff;
      box-shadow: 0 4px 12px rgba(0,0,0,0.04);
    }

    .calc-card-label {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.09em;
      color: #6b7280;
      margin-bottom: 4px;
    }

    .calc-card h3 {
      margin: 0 0 6px;
      font-size: 1rem;
      color: #1f2937;
    }

    .calc-card p {
      margin: 0 0 10px;
      font-size: 0.9rem;
      color: #4b5563;
    }

    @media (max-width: 768px) {
      .calc-grid {
        grid-template-columns: 1fr;
      }
    }

    /* SEZIONE CALCOLATORE */

    .calc-section {
      margin: 32px 0;
      padding: 20px;
      border-radius: 16px;
      background: #f9fafb;
      border: 1px solid #e5e7eb;
    }

    .calc-section h2 {
      margin-top: 0;
      margin-bottom: 6px;
      font-size: 1.25rem;
    }

    .calc-section p {
      font-size: 0.95rem;
      color: #4b5563;
    }

    .calc-grid-inputs {
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
      margin-top: 14px;
    }

    .calc-field {
      flex: 1 1 220px;
    }

    .calc-field label {
      font-size: 0.9rem;
      font-weight: 600;
    }

    .calc-field input,
    .calc-field select {
      width: 100%;
      padding: 8px;
      margin-top: 4px;
      border-radius: 6px;
      border: 1px solid #d1d5db;
      font-size: 0.95rem;
    }

    .mode-switch {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin: 16px 0 10px;
      align-items: center;
      font-size: 0.92rem;
    }

    .mode-pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 10px;
      border-radius: 999px;
      background: #eef2ff;
      border: 1px solid #c7d2fe;
      font-size: 0.9rem;
    }

    .mode-pill input {
      margin: 0;
    }

    .mode-note {
      font-size: 0.82rem;
      color: #6b7280;
      margin-top: 4px;
    }

    .mode-block {
      padding: 12px 14px;
      border-radius: 10px;
      background: #ffffff;
      border: 1px solid #e5e7eb;
      margin-top: 10px;
    }

    .mode-block h3 {
      margin-top: 0;
      font-size: 1.05rem;
    }

    .mode-block.hidden {
      display: none;
    }

    .calc-btn {
      margin-top: 18px;
      background: var(--violet-main);
      color: #fff;
      padding: 9px 18px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      font-size: 0.95rem;
      font-weight: 600;
      transition: background 0.15s ease, transform 0.12s ease, box-shadow 0.12s ease;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .calc-btn:hover {
      background: var(--violet-dark);
      transform: translateY(-1px);
      box-shadow: 0 3px 6px rgba(0,0,0,0.15);
    }

    .calc-btn:active {
      transform: translateY(0);
      box-shadow: none;
    }

    .calc-result {
      margin-top: 16px;
      padding: 18px;
      background: #ffffff;
      border-radius: 14px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.08);
      display: none;
      font-size: 0.95rem;
      border: 1px solid #e5e7eb;
    }

    .result-title {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 10px;
      font-weight: 700;
      color: var(--violet-dark);
      font-size: 1rem;
    }

    .result-title span.emoji {
      font-size: 1.2rem;
    }

    .result-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 10px;
      margin: 10px 0;
    }

    .result-box {
      padding: 10px 12px;
      border-radius: 10px;
      background: #f9fafb;
      border: 1px solid #e5e7eb;
      font-size: 0.9rem;
    }

    .result-label {
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      color: #6b7280;
      margin-bottom: 4px;
    }

    .result-value {
      font-weight: 700;
      font-size: 1rem;
      color: #111827;
    }

    .result-subtext {
      margin-top: 6px;
      font-size: 0.9rem;
      color: #4b5563;
    }

    .result-divider {
      margin: 10px 0;
      height: 1px;
      background: #e5e7eb;
    }

    .small-note {
      font-size: 0.8rem;
      color: #6b7280;
      margin-top: 8px;
    }

    /* Blocco agevolazioni e legale */

    .legal-box-avviso {
      margin-top: 18px;
      margin-bottom: 10px;
      padding: 12px 14px;
      background: #ffffff;
      border-radius: 8px;
      border: 1px solid #e5e7eb;
      font-size: 0.9rem;
      color: #374151;
    }

    .legal-box-avviso a {
      color: var(--violet-main);
      text-decoration: underline;
      font-weight: 600;
    }

    .legal-note-small {
      margin: 6px 0 0;
      font-size: 0.8rem;
      color: #6b7280;
    }

    a {
      color: var(--violet-dark);
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    /* FOOTER */

    .syncras-footer {
      margin-top: 40px;
      padding: 2.5rem 1.5rem 1.5rem;
      background: #2b1840;
      color: #f3eaff;
      font-family: Arial, sans-serif;
      font-size: 0.9rem;
    }

    .syncras-footer a {
      color: #f3eaff;
      text-decoration: none;
    }

    .syncras-footer a:hover {
      text-decoration: underline;
    }

    .footer-inner {
      max-width: 1180px;
      margin: 0 auto 1.5rem auto;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 2rem;
    }

    .footer-column h4 {
      margin-top: 0;
      margin-bottom: 0.7rem;
      font-size: 1rem;
    }

    .footer-column p {
      margin: 0;
      font-size: 0.85rem;
    }

    .footer-column ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .footer-column li {
      margin-bottom: 0.4rem;
      font-size: 0.85rem;
    }

    .footer-bottom {
      max-width: 1180px;
      margin: 0 auto;
      text-align: center;
      font-size: 0.8rem;
      opacity: 0.9;
    }

    .footer-bottom p {
      margin: 4px 0;
    }
  </style>
</head>
<body>
  <header class="site-header">
    <div class="header-inner">
      <div class="logo">Syncras.App</div>

      <button class="menu-toggle" type="button" onclick="toggleMenu()" aria-label="Apri o chiudi il menu di navigazione">
        Menu <span>‚ò∞</span>
      </button>

      <nav id="main-nav">
        <a href="index.html">Home</a>
        <a href="blog.html">Blog</a>
        <a href="quiz.html">Test Anti-Acquisto</a>
        <a href="calcolatori.html" class="active">Calcolatori</a>
        <a href="curiosita.html">Curiosit√†</a>
        <a href="misteri.html">Misteri</a>
        <a href="offerte.html">Prodotti Consapevoli</a>
        <a href="chi.html">Chi siamo</a>
      </nav>
    </div>
  </header>

  <main>
    <div class="page-intro">
      <span class="badge-page">Area strumenti</span>
      <h1>üî• Pompa di calore vs caldaia a gas: conviene davvero?</h1>
      <div style="background:#FEF6D8; padding:10px 14px; border-left:4px solid #EAB308; border-radius:6px; margin:15px 0; font-size:0.9rem;">
        ‚ö†Ô∏è <strong>Avviso importante:</strong> questo calcolatore fornisce <strong>stime orientative</strong> sui consumi
        e sui costi di riscaldamento, basate su ipotesi standard (efficienze, COP, fabbisogni termici medi, ecc.).
        Non sostituisce una progettazione termotecnica o una consulenza professionale.
      </div>

      <p class="intro-text">
        Puoi usare questo strumento in due modi: con i <strong>dati reali delle tue bollette</strong>
        oppure stimando il fabbisogno termico in base a <strong>superficie, zona climatica e isolamento</strong>.
        Alla fine vedrai il <strong>costo annuo con gas</strong>, il <strong>costo annuo con pompa di calore</strong>,
        il <strong>risparmio</strong> e il <strong>tempo di rientro</strong> dell‚Äôinvestimento, anche considerando le
        <strong>agevolazioni fiscali</strong>.
      </p>
    </div>

    <!-- Pulsante CONDIVIDI in alto -->
    <button id="shareBtnTop"
      style="background: var(--violet-main); color:white; padding:10px 15px; border:none;
             border-radius:6px; cursor:pointer; margin-bottom:20px; font-weight:600;">
      üìé Condividi questa pagina
    </button>

    <!-- CARD DI SPIEGAZIONE -->
    <section aria-label="Informazioni sul calcolatore">
      <h2>Come funziona il confronto gas vs pompa di calore</h2>
      <div class="calc-grid">
        <article class="calc-card">
          <div class="calc-card-label">Modalit√† A</div>
          <h3>Hai gi√† i consumi reali di gas (da bolletta)</h3>
          <p>
            Inserisci i <strong>m¬≥ di gas annui</strong>, il costo al m¬≥, l‚Äôefficienza della tua caldaia
            e i dati di una possibile pompa di calore (COP e costo kWh).  
            Il calcolatore stima il calore prodotto, il consumo elettrico della PDC, il costo annuo
            e il <strong>risparmio</strong> rispetto al gas.
          </p>
        </article>

        <article class="calc-card">
          <div class="calc-card-label">Modalit√† B</div>
          <h3>Non conosci i consumi? Parti dalla casa</h3>
          <p>
            Inserisci <strong>superficie riscaldata</strong>, zona (Nord, Centro, Sud), isolamento, tipo di abitazione
            (appartamento o casa indipendente) e se sei in montagna.  
            Il calcolatore stima il <strong>fabbisogno termico annuo (kWh)</strong> e da l√¨ ricava consumi e costi
            per gas e pompa di calore.
          </p>
        </article>
      </div>
    </section>

    <!-- CALCOLATORE POMPA DI CALORE -->
    <section class="calc-section" id="calc-pdc">
      <h2>Calcolatore Pompa di Calore vs Caldaia a Gas</h2>
      <p>
        Scegli la modalit√† che ti √® pi√π comoda: se hai una bolletta a portata di mano usa la Modalit√† A,
        altrimenti puoi stimare tutto con la Modalit√† B a partire dalla casa.
      </p>

      <!-- SWITCH MODALIT√Ä -->
      <div class="mode-switch">
        <label class="mode-pill">
          <input type="radio" name="mode" value="A" checked onclick="switchMode('A')">
          <span>Modalit√† A ‚Äì Consumi reali (m¬≥ da bolletta)</span>
        </label>
        <label class="mode-pill">
          <input type="radio" name="mode" value="B" onclick="switchMode('B')">
          <span>Modalit√† B ‚Äì Stima da casa, zona e isolamento</span>
        </label>
      </div>
      <p class="mode-note">
        Puoi cambiare modalit√† in qualsiasi momento. I risultati sono stime indicative, pensate per ragionare a grandi linee
        sulla convenienza, non per sostituire un progetto termotecnico.
      </p>

      <!-- MODALIT√Ä A -->
      <div id="modeA" class="mode-block">
        <h3>Modalit√† A ‚Äì Hai gi√† i consumi annui di gas</h3>
        <p style="font-size:0.9rem; color:#4b5563;">
          Usa questa modalit√† se conosci quanti <strong>m¬≥ di gas</strong> consumi in un anno per il riscaldamento
          (dalla bolletta o dallo storico contrattuale).
        </p>

        <div class="calc-grid-inputs">
          <div class="calc-field">
            <label for="m3GasAnnui">Consumo annuo di gas per riscaldamento (m¬≥/anno)</label>
            <input id="m3GasAnnui" type="number" min="100" max="50000" step="50" placeholder="Es. 1200">
          </div>

          <div class="calc-field">
            <label for="costoGas">Costo gas attuale (‚Ç¨/m¬≥)</label>
            <input id="costoGas" type="number" min="0.2" max="3" step="0.01" value="1.00">
          </div>

          <div class="calc-field">
            <label for="effCaldaiaA">Efficienza caldaia attuale (%)</label>
            <input id="effCaldaiaA" type="number" min="60" max="98" step="1" value="90">
          </div>

          <div class="calc-field">
            <label for="copPdcA">COP medio pompa di calore</label>
            <input id="copPdcA" type="number" min="1.5" max="6" step="0.1" value="3.0">
          </div>

          <div class="calc-field">
            <label for="costoKwhA">Costo energia elettrica (‚Ç¨/kWh)</label>
            <input id="costoKwhA" type="number" min="0.1" max="1" step="0.01" value="0.25">
          </div>
        </div>
      </div>

      <!-- MODALIT√Ä B -->
      <div id="modeB" class="mode-block hidden">
        <h3>Modalit√† B ‚Äì Parti dalla casa (stima fabbisogno termico)</h3>
        <p style="font-size:0.9rem; color:#4b5563;">
          Usa questa modalit√† se <strong>non conosci i m¬≥ di gas annui</strong>.  
          Inserisci la superficie riscaldata e alcune caratteristiche della casa: verr√† stimato il fabbisogno termico
          e da l√¨ i consumi di gas e pompa di calore.
        </p>

        <div class="calc-grid-inputs">
          <div class="calc-field">
            <label for="superficie">Superficie riscaldata (m¬≤)</label>
            <input id="superficie" type="number" min="30" max="500" step="5" placeholder="Es. 100">
          </div>

          <div class="calc-field">
            <label for="zonaClimatica">Zona climatica</label>
            <select id="zonaClimatica">
              <option value="nord">Nord (zone E-F)</option>
              <option value="centro" selected>Centro (zone C-D)</option>
              <option value="sud">Sud e isole (zone A-B)</option>
            </select>
          </div>

          <div class="calc-field">
            <label for="isolamento">Isolamento dell‚Äôedificio</label>
            <select id="isolamento">
              <option value="scarso">Scarso (infissi vecchi, niente cappotto)</option>
              <option value="medio" selected>Medio (doppi vetri, isolamento parziale)</option>
              <option value="buono">Buono (cappotto, tetto isolato, infissi recenti)</option>
            </select>
          </div>
        </div>

        <div class="calc-grid-inputs">
          <div class="calc-field">
            <label for="tipoAbitazione">Tipo di abitazione</label>
            <select id="tipoAbitazione">
              <option value="centrale">Appartamento centrale</option>
              <option value="ultimo">Appartamento ultimo piano</option>
              <option value="indipendente" selected>Casa indipendente / villino</option>
            </select>
          </div>

          <div class="calc-field">
            <label for="montagna">Abitazione in montagna (oltre 800 m)</label>
            <select id="montagna">
              <option value="no" selected>No</option>
              <option value="si">S√¨</option>
            </select>
          </div>

          <div class="calc-field">
            <label for="effCaldaiaB">Efficienza caldaia attuale (%)</label>
            <input id="effCaldaiaB" type="number" min="60" max="98" step="1" value="90">
          </div>

          <div class="calc-field">
            <label for="copPdcB">COP medio pompa di calore</label>
            <input id="copPdcB" type="number" min="1.5" max="6" step="0.1" value="3.0">
          </div>

          <div class="calc-field">
            <label for="costoGasB">Costo gas (‚Ç¨/m¬≥)</label>
            <input id="costoGasB" type="number" min="0.2" max="3" step="0.01" value="1.00">
          </div>

          <div class="calc-field">
            <label for="costoKwhB">Costo energia elettrica (‚Ç¨/kWh)</label>
            <input id="costoKwhB" type="number" min="0.1" max="1" step="0.01" value="0.25">
          </div>
        </div>
      </div>

      <!-- BLOCCO AGEVOLAZIONI E NOTE LEGALI -->
      <div class="legal-box-avviso">
        <div class="calc-grid-inputs" style="margin-top:0;">
          <div class="calc-field">
            <label for="costoInvestimento">Costo complessivo della nuova pompa di calore (‚Ç¨)</label>
            <input id="costoInvestimento" type="number" min="500" max="30000" step="100" placeholder="Es. 8000">
          </div>

          <div class="calc-field">
            <label for="agevolazione">Percentuale agevolazione fiscale (%)</label>
            <input id="agevolazione" type="number" min="0" max="100" step="1" value="50">
          </div>
        </div>

        <label style="display:block; margin-top:10px;">
          <input type="checkbox" id="legalAcceptPdc">
          Prima di procedere: i risultati di questo calcolatore sono solo <strong>stime indicative</strong>
          basate su ipotesi semplificate (COP, efficienze, fabbisogni medi, prezzi energia).  
          Non sono una progettazione termotecnica n√© una consulenza professionale. L‚Äôutilizzo di questo
          strumento √® a tuo esclusivo rischio e la responsabilit√† delle decisioni resta solo tua.
          Tutte le condizioni sono spiegate nelle
          <a href="note-legali.html" target="_blank">Note Legali</a>.
        </label>
        <p class="legal-note-small">
          Le agevolazioni fiscali possono cambiare nel tempo e dipendono dalla normativa vigente e dalla tua situazione
          personale. Per detrazioni, incentivi e pratiche amministrative fai sempre riferimento al tuo CAF, commercialista
          o a un tecnico/professionista abilitato.
        </p>
      </div>

      <button class="calc-btn" type="button" onclick="calcolaPdc()">
        üîç Calcola confronto gas vs pompa di calore
      </button>

      <div id="pdcResult" class="calc-result"></div>

      <!-- Pulsante CONDIVIDI in basso -->
      <div style="text-align:center; margin:20px 0;">
        <button id="shareBtnBottom"
          style="background: var(--violet-main); color:white; padding:10px 18px; border:none;
                 border-radius:6px; cursor:pointer; font-weight:600; font-size:1rem;">
          üìé Condividi il risultato
        </button>
      </div>

      <p class="small-note">
        Questo strumento √® pensato per dare un ordine di grandezza sul risparmio potenziale passando da caldaia a gas
        a pompa di calore. I risultati non sostituiscono una valutazione progettuale completa, che deve considerare
        impianto esistente, terminali, temperature di mandata, normativa e vincoli dell‚Äôedificio.
      </p>
    </section>
  </main>

  <footer class="syncras-footer">
    <div class="footer-inner">
      <div class="footer-column">
        <h4>Syncras.App</h4>
        <p>
          Metodo SmartShop per fare acquisti con la testa (e con un po‚Äô di ironia).<br>
          Niente tecnicismi inutili, solo esperienze reali e numeri spiegati semplice.
        </p>
      </div>

      <div class="footer-column">
        <h4>Link utili</h4>
        <ul>
          <li><a href="blog.html">Tutte le guide SmartShop</a></li>
          <li><a href="offerte.html">Offerte Amazon selezionate</a></li>
          <li><a href="smart-tv-economica-o-tv-buona-con-box.html">Guida Smart TV</a></li>
          <li><a href="fotovoltaico-4kw-accumulo-10kwh-quanto-costa-davvero-nel-2025.html">Guida fotovoltaico 4 kW</a></li>
        </ul>
      </div>

      <div class="footer-column">
        <h4>Legale & Privacy</h4>
        <ul>
          <li><a href="privacy.html">Privacy Policy</a></li>
          <li><a href="cookie.html">Cookie Policy</a></li>
          <li><a href="disclaimer-amazon.html">Disclaimer Amazon</a></li>
          <li><a href="note-legali.html">Note Legali</a></li>
        </ul>
      </div>
    </div>

    <div class="footer-bottom">
      <p>¬© <span id="year-span"></span> Syncras.App ‚Äî Tutti i diritti riservati.</p>
      <p>
        Syncras.App partecipa al Programma Affiliazione Amazon EU.  
        Acquistando tramite i link presenti nelle pagine, il sito pu√≤ ricevere una piccola commissione
        senza alcun costo aggiuntivo per l‚Äôutente.
      </p>
      <p>
        Per informazioni su ordini, resi, spedizioni o gestione dei dati relativi agli acquisti,
        √® necessario rivolgersi direttamente al servizio clienti Amazon tramite il proprio account.
      </p>
    </div>
  </footer>

  <script>
    function toggleMenu() {
      document.body.classList.toggle('nav-open');
    }

    // FORMATTAZIONE EURO
    function euro(val) {
      return val.toFixed(2).replace('.', ',');
    }

    // SWITCH MODALIT√Ä
    function switchMode(mode) {
      const a = document.getElementById('modeA');
      const b = document.getElementById('modeB');
      if (mode === 'A') {
        a.classList.remove('hidden');
        b.classList.add('hidden');
      } else {
        b.classList.remove('hidden');
        a.classList.add('hidden');
      }
      // Nascondi eventuale risultato precedente
      const box = document.getElementById('pdcResult');
      if (box) box.style.display = 'none';
    }

    // Stima fabbisogno termico specifico (kWh/m¬≤ anno) dalla matrice di Gemini
    function getETh(zona, isolamento) {
      // valori medi indicativi
      if (zona === 'nord') {
        if (isolamento === 'scarso') return 165;    // 150-180
        if (isolamento === 'medio') return 115;     // 100-130
        return 75;                                  // 60-90
      } else if (zona === 'centro') {
        if (isolamento === 'scarso') return 135;    // 120-150
        if (isolamento === 'medio') return 95;      // 80-110
        return 60;                                  // 50-70
      } else { // sud
        if (isolamento === 'scarso') return 95;     // 80-110
        if (isolamento === 'medio') return 65;      // 50-80
        return 40;                                  // 30-50
      }
    }

    function getFattoreForma(tipoAbitazione) {
      if (tipoAbitazione === 'centrale') return 0.85;
      if (tipoAbitazione === 'ultimo') return 1.10;
      return 1.00; // casa indipendente base
    }

    function getFattoreMontagna(montagna) {
      return montagna === 'si' ? 1.15 : 1.00;
    }

    // CALCOLO POMPA DI CALORE VS GAS
    function calcolaPdc() {
      const legalCheckbox = document.getElementById('legalAcceptPdc');
      if (legalCheckbox && !legalCheckbox.checked) {
        alert('Per usare il calcolatore devi dichiarare di aver letto e accettato le Note Legali.');
        return;
      }

      const costoInvestimento = parseFloat(document.getElementById('costoInvestimento').value) || 0;
      const agevolazionePerc = parseFloat(document.getElementById('agevolazione').value) || 0;

      if (costoInvestimento <= 0) {
        alert('Inserisci un costo complessivo della pompa di calore maggiore di zero.');
        return;
      }

      const mode = document.querySelector('input[name="mode"]:checked')?.value || 'A';

      // Parametri energetici di base
      const PCI_GAS = 9.5; // kWh per m¬≥

      let costoGasAnnuo = 0;
      let costoPdcAnnuo = 0;
      let Q_annuo = 0; // calore utile annuo, kWh
      let descrizioneBase = '';

      if (mode === 'A') {
        // MODALIT√Ä A: dai consumi reali
        const m3GasAnnui = parseFloat(document.getElementById('m3GasAnnui').value) || 0;
        const costoGas = parseFloat(document.getElementById('costoGas').value) || 0;
        const effCaldaia = (parseFloat(document.getElementById('effCaldaiaA').value) || 0) / 100;
        const copPdc = parseFloat(document.getElementById('copPdcA').value) || 0;
        const costoKwh = parseFloat(document.getElementById('costoKwhA').value) || 0;

        if (m3GasAnnui <= 0 || costoGas <= 0 || effCaldaia <= 0 || copPdc <= 0 || costoKwh <= 0) {
          alert('Controlla di aver inserito tutti i valori della Modalit√† A maggiori di zero.');
          return;
        }

        // Costo gas attuale
        costoGasAnnuo = m3GasAnnui * costoGas;

        // Calore utile generato dalla caldaia attuale
        Q_annuo = m3GasAnnui * PCI_GAS * effCaldaia;

        // Consumo elettrico PDC equivalente
        const kwhPdc = Q_annuo / copPdc;
        costoPdcAnnuo = kwhPdc * costoKwh;

        descrizioneBase = `Stima basata su ${m3GasAnnui.toLocaleString('it-IT')} m¬≥/anno di gas per il riscaldamento.`;

      } else {
        // MODALIT√Ä B: da superficie e parametri casa
        const superficie = parseFloat(document.getElementById('superficie').value) || 0;
        const zona = document.getElementById('zonaClimatica').value;
        const isolamento = document.getElementById('isolamento').value;
        const tipoAbitazione = document.getElementById('tipoAbitazione').value;
        const montagna = document.getElementById('montagna').value;

        const effCaldaiaB = (parseFloat(document.getElementById('effCaldaiaB').value) || 0) / 100;
        const copPdcB = parseFloat(document.getElementById('copPdcB').value) || 0;
        const costoGasB = parseFloat(document.getElementById('costoGasB').value) || 0;
        const costoKwhB = parseFloat(document.getElementById('costoKwhB').value) || 0;

        if (superficie <= 0 || effCaldaiaB <= 0 || copPdcB <= 0 || costoGasB <= 0 || costoKwhB <= 0) {
          alert('Controlla di aver inserito tutti i valori della Modalit√† B maggiori di zero.');
          return;
        }

        const E_th = getETh(zona, isolamento); // kWh/m¬≤ anno
        const F_forma = getFattoreForma(tipoAbitazione);
        const F_montagna = getFattoreMontagna(montagna);

        // Fabbisogno termico annuo corretto
        Q_annuo = superficie * E_th * F_forma * F_montagna; // kWh/anno

        // m¬≥ gas equivalenti con caldaia attuale
        const m3GasEq = Q_annuo / (PCI_GAS * effCaldaiaB);
        costoGasAnnuo = m3GasEq * costoGasB;

        // Consumo elettrico PDC
        const kwhPdcB = Q_annuo / copPdcB;
        costoPdcAnnuo = kwhPdcB * costoKwhB;

        descrizioneBase = `Stima basata su una superficie di ${superficie.toLocaleString('it-IT')} m¬≤, zona ${zona.toUpperCase()}, isolamento ${isolamento}, tipo abitazione "${tipoAbitazione}"${montagna === 'si' ? ', in montagna' : ''}.`;
      }

      // Risparmi e ROI
      const risparmioAnn = costoGasAnnuo - costoPdcAnnuo;
      const risparmioAnnPos = risparmioAnn > 0 ? risparmioAnn : 0;

      let roiLordo = null;
      let roiNetto = null;
      let costoNetto = costoInvestimento;

      if (risparmioAnnPos > 0) {
        roiLordo = costoInvestimento / risparmioAnnPos;
        const coeffAgev = Math.max(0, Math.min(agevolazionePerc, 100)) / 100;
        costoNetto = costoInvestimento * (1 - coeffAgev);
        roiNetto = costoNetto / risparmioAnnPos;
      }

      const box = document.getElementById('pdcResult');

      let testoRisparmio;
      if (risparmioAnn <= -1) {
        testoRisparmio = `
          <p class="result-subtext">
            Con i dati inseriti, la pompa di calore risulta <strong>pi√π costosa del gas</strong> come spesa annua di energia.
            In questo caso il passaggio a PDC potrebbe avere senso solo per altri motivi (comfort, riduzione emissioni, integrazione con fotovoltaico, ecc.).
          </p>
        `;
      } else if (risparmioAnn > 0 && risparmioAnn < 50) {
        testoRisparmio = `
          <p class="result-subtext">
            Il risparmio annuo stimato √® piuttosto contenuto. Piccole variazioni di prezzi, COP reale o abitudini d‚Äôuso
            possono annullarlo o renderlo pi√π interessante.
          </p>
        `;
      } else if (risparmioAnn >= 50) {
        testoRisparmio = `
          <p class="result-subtext">
            Il risparmio annuo √® significativo. Se i dati inseriti sono realistici e le condizioni impiantistiche lo
            permettono, la pompa di calore potrebbe essere una soluzione economicamente interessante nel medio periodo.
          </p>
        `;
      } else {
        testoRisparmio = '';
      }

      let roiText = '';
      if (risparmioAnnPos > 0 && roiLordo !== null && roiNetto !== null) {
        const anniLordo = roiLordo.toFixed(1);
        const anniNetto = roiNetto.toFixed(1);
        roiText = `
          <div class="result-grid">
            <div class="result-box">
              <div class="result-label">ROI lordo (senza agevolazioni)</div>
              <div class="result-value">~ ${anniLordo} anni</div>
            </div>
            <div class="result-box">
              <div class="result-label">ROI netto (con agevolazioni)</div>
              <div class="result-value">~ ${anniNetto} anni</div>
            </div>
          </div>
          <p class="small-note">
            Il ROI netto √® calcolato ipotizzando che l‚Äôagevolazione fiscale riduca di
            <strong>${agevolazionePerc.toFixed(0)}%</strong> il costo effettivo a tuo carico,
            senza entrare nel dettaglio dei tempi e delle modalit√† di rimborso (rate decennali, plafond, limiti normativi, ecc.).
          </p>
        `;
      } else {
        roiText = `
          <p class="small-note">
            Con i dati inseriti non emerge un risparmio annuo sufficiente per calcolare un tempo di rientro sensato.
            Puoi provare a modificare COP, prezzi dell‚Äôenergia o costo dell‚Äôintervento per vedere scenari diversi.
          </p>
        `;
      }

      box.innerHTML = `
        <div class="result-title">
          <span class="emoji">üìä</span>
          <span>Risultato del confronto gas vs pompa di calore</span>
        </div>

        <p class="small-note">${descrizioneBase}</p>

        <div class="result-grid">
          <div class="result-box">
            <div class="result-label">Costo annuo con caldaia a gas</div>
            <div class="result-value">${euro(costoGasAnnuo)} ‚Ç¨ / anno</div>
          </div>
          <div class="result-box">
            <div class="result-label">Costo annuo con pompa di calore</div>
            <div class="result-value">${euro(costoPdcAnnuo)} ‚Ç¨ / anno</div>
          </div>
          <div class="result-box">
            <div class="result-label">Risparmio annuo stimato</div>
            <div class="result-value">${euro(risparmioAnn)} ‚Ç¨ / anno</div>
          </div>
          <div class="result-box">
            <div class="result-label">Costo intervento (lordo)</div>
            <div class="result-value">${euro(costoInvestimento)} ‚Ç¨</div>
          </div>
          <div class="result-box">
            <div class="result-label">Costo stimato dopo agevolazioni</div>
            <div class="result-value">${euro(costoNetto)} ‚Ç¨</div>
          </div>
        </div>

        ${testoRisparmio}
        <div class="result-divider"></div>
        ${roiText}

        <p class="small-note">
          Tutti i valori sono stimati a partire dai dati inseriti dall‚Äôutente e da ipotesi standard sui rendimenti.
          Prima di procedere con un intervento importante √® sempre consigliabile confrontarsi con il proprio tecnico
          di fiducia e verificare la compatibilit√† dell‚Äôimpianto esistente (radiatori, fan-coil, pavimento radiante, ecc.).
        </p>
      `;
      box.style.display = 'block';
    }

    // FOOTER YEAR
    document.addEventListener('DOMContentLoaded', function() {
      var span = document.getElementById('year-span');
      if (span) {
        span.textContent = new Date().getFullYear();
      }
    });

    // CONDIVISIONE (top + bottom)
    (function() {
      const shareTop = document.getElementById('shareBtnTop');
      const shareBottom = document.getElementById('shareBtnBottom');

      function attachShare(btn) {
        if (!btn) return;
        if (navigator.share) {
          btn.addEventListener('click', () => {
            navigator.share({
              title: 'Calcolatore Pompa di Calore vs Gas ‚Äì Syncras.App',
              text: 'Vuoi capire se ti conviene passare da caldaia a gas a pompa di calore? Prova questo calcolatore:',
              url: window.location.href
            });
          });
        } else {
          btn.style.display = 'none';
        }
      }

      attachShare(shareTop);
      attachShare(shareBottom);
    })();
  </script>

  <!-- Cookie Banner + Blocco Google Analytics ‚Äì Versione GDPR Perfetta -->
  <div id="cookie-banner">
    <p>
      Usiamo cookie tecnici e dati anonimi per migliorare il sito e misurare le visite
      (Google Analytics). Alcuni link potrebbero essere di affiliazione.
      Per dettagli leggi la <a href="cookie.html">Cookie Policy</a> e la
      <a href="privacy.html">Privacy Policy</a>.
    </p>
    <div style="display:flex; gap:10px; margin-top:8px;">
      <button type="button" onclick="rejectCookies()">
        Rifiuta
      </button>
      <button id="cookie-btn" type="button" onclick="acceptCookies()">
        Accetta e continua
      </button>
    </div>
  </div>

  <style>
    #cookie-banner {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      max-width: 90%;
      width: 420px;
      background: #ffffff;
      border: 2px solid #6C5CE7;
      border-radius: 10px;
      padding: 16px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
      z-index: 9999;
      font-family: Arial, sans-serif;
      display: none;
    }

    #cookie-banner p {
      margin: 0 0 12px 0;
      font-size: 0.95rem;
      color: #333;
      line-height: 1.4;
    }

    #cookie-banner a {
      color: #6C5CE7;
      font-weight: bold;
      text-decoration: none;
    }

    #cookie-banner button[onclick="rejectCookies()"] {
      flex: 1;
      background: white !important;
      color: #111827 !important;
      border: 2px solid #6C5CE7 !important;
      padding: 10px 12px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
    }

    #cookie-btn {
      flex: 1;
      background: #6C5CE7;
      color: white;
      border: 2px solid #6C5CE7;
      padding: 10px 16px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 700;
    }

    #cookie-btn:hover {
      background: #4B3ACB;
    }
  </style>

  <script>
    (function () {
      const GA_ID = 'G-CFTTCYDZ2P';
      const CONSENT_KEY = "syncras_cookie_consent";

      function loadGoogleAnalytics() {
        if (window.__tizianaGaLoaded) return;
        window.__tizianaGaLoaded = true;

        const gaScript = document.createElement('script');
        gaScript.async = true;
        gaScript.src = 'https://www.googletagmanager.com/gtag/js?id=' + GA_ID;
        document.head.appendChild(gaScript);

        window.dataLayer = window.dataLayer || [];
        function gtag(){ dataLayer.push(arguments); }
        window.gtag = gtag;
        gtag('js', new Date());
        gtag('config', GA_ID, { anonymize_ip: true });
      }

      function showBanner() {
        const banner = document.getElementById('cookie-banner');
        if (banner) banner.style.display = 'block';
      }

      function hideBanner() {
        const banner = document.getElementById('cookie-banner');
        if (banner) banner.style.display = 'none';
      }

      window.acceptCookies = function () {
        localStorage.setItem(CONSENT_KEY, 'yes');
        hideBanner();
        loadGoogleAnalytics();
      };

      window.rejectCookies = function () {
        localStorage.setItem(CONSENT_KEY, 'no');
        hideBanner();
      };

      document.addEventListener('DOMContentLoaded', function () {
        const consent = localStorage.getItem(CONSENT_KEY);

        if (consent === 'yes') {
          loadGoogleAnalytics();
        } else if (consent === 'no') {
          // niente GA, niente banner
        } else {
          showBanner();
        }
      });
    })();
  </script>

</body>
</html>


<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="theme-color" content="#4B3ACB">
  <link rel="icon" href="/assets/icon-syncras-512.png" type="image/png">
<link rel="apple-touch-icon" href="/assets/icon-syncras-512.png">
<meta name="apple-mobile-web-app-title" content="Syncras">
  <title>Calcolatore Impronta di Carbonio 2026: CO‚ÇÇ/anno e Pianeti Terra | Syncras.App</title>

  <meta name="description" content="Calcola la tua impronta di carbonio in 60 secondi: t CO‚ÇÇ/anno, Pianeti Terra, confronto con media italiana e obiettivo clima. Risultato condivisibile.">
  <meta name="robots" content="index,follow">
  <link rel="canonical" href="https://syncras.app/calcolatore-impronta-di-carbonio.html">

  <!-- Open Graph / Social -->
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="Syncras.App">
  <meta property="og:title" content="Calcolatore Impronta di Carbonio 2026 (Syncras.App)">
  <meta property="og:description" content="Stima rapida: t CO‚ÇÇ/anno, Pianeti Terra, equivalenze e confronto con media e obiettivo clima.">
  <meta property="og:url" content="https://syncras.app/calcolatore-impronta-di-carbonio.html">
  <!-- Se hai un‚Äôimmagine OG del sito, mettila qui -->
  <!-- <meta property="og:image" content="https://syncras.app/assets/og-carbonio.png"> -->
  <meta name="twitter:card" content="summary_large_image">

  <!-- JSON-LD (WebApplication) -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"WebApplication",
    "name":"Calcolatore Impronta di Carbonio (Syncras.App)",
    "applicationCategory":"UtilitiesApplication",
    "operatingSystem":"All",
    "description":"Calcolatore gratuito per stimare l'impronta di carbonio personale con output in Pianeti Terra, equivalenze intuitive e confronto con media italiana e obiettivo clima.",
    "offers":{"@type":"Offer","price":"0","priceCurrency":"EUR"},
    "url":"https://syncras.app/calcolatore-impronta-di-carbonio.html"
  }
  </script>

  <!-- JSON-LD (FAQPage) per SEO -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"FAQPage",
    "mainEntity":[
      {
        "@type":"Question",
        "name":"Cos‚Äô√® l‚Äôimpronta di carbonio personale?",
        "acceptedAnswer":{
          "@type":"Answer",
          "text":"√à una stima delle emissioni annue di gas serra (in t CO‚ÇÇ/anno) legate al tuo stile di vita: mobilit√†, casa, alimentazione e consumi."
        }
      },
      {
        "@type":"Question",
        "name":"Cosa significa ‚ÄúPianeti Terra‚Äù nel risultato?",
        "acceptedAnswer":{
          "@type":"Answer",
          "text":"√à una traduzione intuitiva: indica quante Terre servirebbero se tutti vivessero come te, rispetto a un obiettivo di sostenibilit√† usato come riferimento."
        }
      },
      {
        "@type":"Question",
        "name":"Quanto √® accurato questo calcolo?",
        "acceptedAnswer":{
          "@type":"Answer",
          "text":"√à una stima indicativa basata su fattori medi. Serve per capire dove pesa di pi√π e scegliere il primo passo pi√π efficace."
        }
      }
    ]
  }
  </script>
 <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"BreadcrumbList",
    "itemListElement":[
      {
        "@type":"ListItem",
        "position":1,
        "name":"Home",
        "item":"https://syncras.app/"
      },
      {
        "@type":"ListItem",
        "position":2,
        "name":"Calcolatori",
        "item":"https://syncras.app/calcolatori.html"
      },
      {
        "@type":"ListItem",
        "position":3,
        "name":"Calcolatore impronta di carbonio",
        "item":"https://syncras.app/calcolatore-impronta-di-carbonio.html"
      }
    ]
  }
  </script>
  <style>
    :root{
      --violet:#6C5CE7;
      --violet-dark:#4B3ACB;
      --bg:#F7F7FB;
      --card:#ffffff;
      --border:#e5e7eb;
      --text:#111827;
      --muted:#6b7280;
      --soft:#f3f4ff;
      --good:#10b981;
      --warn:#f59e0b;
      --bad:#ef4444;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Arial, sans-serif;background:var(--bg);color:var(--text);line-height:1.5}

    /* ===== HEADER Syncras ===== */
    .site-header{
      background:linear-gradient(90deg, var(--violet-dark), var(--violet));
      color:#fff;padding:12px 14px;box-shadow:0 2px 4px rgba(0,0,0,.15);
      position:sticky;top:0;z-index:50;
    }
    .header-inner{
      max-width:980px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;gap:16px;
      position:relative;
    }
    .logo{font-size:1.35rem;font-weight:bold;letter-spacing:.03em}
    #main-nav{display:flex;gap:14px;font-size:.95rem}
    #main-nav a{color:#fff;text-decoration:none;font-weight:700;padding-bottom:2px;border-bottom:2px solid transparent}
    #main-nav a:hover{text-decoration:underline}
    .menu-toggle{
      display:none;background:rgba(255,255,255,.12);border:1px solid rgba(255,255,255,.4);
      border-radius:8px;color:white;padding:6px 10px;font-size:.9rem;cursor:pointer;
    }
    .menu-toggle span{margin-left:4px;font-size:1.1rem}
    @media (max-width: 768px){
      #main-nav{
        display:none;position:absolute;left:0;right:0;top:56px;margin:0 auto;max-width:980px;
        flex-direction:column;background-color:var(--violet-dark);
        padding:10px 16px 12px;border-radius:0 0 10px 10px;box-shadow:0 3px 6px rgba(0,0,0,.25);
      }
      #main-nav a{padding:6px 0}
      body.nav-open #main-nav{display:flex}
      .menu-toggle{display:inline-flex;align-items:center}
    }

    /* ===== MAIN CARD ===== */
    main{
      max-width:980px;margin:16px auto 28px;padding:16px 14px 22px;
      background:var(--card);border:1px solid var(--border);border-radius:14px;
      box-shadow:0 10px 22px rgba(0,0,0,.06);
    }
    h1{margin:0 0 8px;color:var(--violet-dark)}
    .sub{margin:0 0 12px;color:var(--muted);font-size:.95rem}

    .badge{
      display:inline-block;padding:3px 9px;border-radius:999px;
      background:rgba(108,92,231,.10);border:1px solid rgba(108,92,231,.25);
      color:#312e81;font-weight:900;font-size:.78rem;letter-spacing:.05em;text-transform:uppercase;
      margin-bottom:8px;
    }

    .topbar{
      display:flex;gap:10px;flex-wrap:wrap;align-items:flex-end;justify-content:space-between;
      padding:12px;border-radius:14px;background:linear-gradient(90deg, rgba(108,92,231,.10), rgba(75,58,203,.08));
      border:1px solid rgba(108,92,231,.22);margin:12px 0 14px;
    }

    .btn{
      border:none;border-radius:999px;padding:10px 14px;font-weight:900;cursor:pointer;
      background:linear-gradient(90deg, var(--violet-dark), var(--violet));color:#fff;
      box-shadow:0 6px 14px rgba(0,0,0,.12);
      display:inline-flex;align-items:center;gap:8px;
    }
    .btn.secondary{
      background:#fff;color:var(--violet-dark);border:2px solid rgba(108,92,231,.55);
      box-shadow:none;
    }
    .btn:active{transform:translateY(1px)}
    .btn.small{padding:9px 12px;font-size:.92rem}

    /* ===== Legal ===== */
    .legal{
      margin:10px 0 10px;padding:10px 12px;border-radius:14px;background:#fff;
      border:1px solid var(--border);font-size:.92rem;
    }
    .legal a{color:var(--violet);font-weight:900;text-decoration:underline}
    .legal-warning{
      display:none;
      background:#FFF4D6;
      padding:10px 14px;
      border-left:4px solid #F59E0B;
      border-radius:10px;
      margin:10px 0 14px;
      font-size:.92rem;
      color:#374151;
    }

    /* ===== Sections ===== */
    .section{
      margin-top:14px;padding:14px;border-radius:14px;background:#fff;border:1px solid var(--border);
    }
    .sectionHead{
      display:flex;align-items:baseline;justify-content:space-between;gap:10px;flex-wrap:wrap;
      margin-bottom:10px;
    }
    .sectionHead h2{margin:0;color:var(--violet-dark);font-size:1.05rem}
    .sectionHead small{color:var(--muted)}
    .hint{font-size:.82rem;color:var(--muted)}
    .grid2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    @media (max-width: 840px){ .grid2{grid-template-columns:1fr} }

    /* ===== Controls ===== */
    .control{
      padding:12px;border-radius:14px;background:#fafafa;border:1px solid #eee;
      position:relative;
    }
    .control label{display:flex;align-items:center;justify-content:space-between;gap:10px;font-weight:900}
    .control .value{
      font-weight:900;background:#fff;border:1px solid rgba(108,92,231,.25);
      padding:4px 10px;border-radius:999px;white-space:nowrap;
    }
    .control .mini{margin-top:6px;color:var(--muted);font-size:.82rem;font-weight:700}

    .choices{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
    .chip{
      border:1px solid rgba(108,92,231,.25);
      background:#fff;border-radius:999px;padding:8px 10px;
      font-weight:900;cursor:pointer;user-select:none;
      display:inline-flex;align-items:center;gap:8px;
    }
    .chip.active{
      background:linear-gradient(90deg, rgba(108,92,231,.12), rgba(75,58,203,.10));
      border-color:rgba(108,92,231,.55);
    }
    .chip small{font-weight:700;color:var(--muted)}

    /* ===== Slider UX migliorata ===== */
    .rangeWrap{margin-top:10px}
    .rangeRow{
      display:flex;align-items:center;gap:10px;flex-wrap:wrap;
      margin-top:10px;
    }
    .rangeRow .pm{
      width:40px;height:40px;border-radius:12px;
      border:2px solid rgba(108,92,231,.45);
      background:#fff;color:var(--violet-dark);
      font-weight:900;cursor:pointer;
      display:grid;place-items:center;
      box-shadow:0 4px 10px rgba(0,0,0,.06);
    }
    .rangeRow .pm:active{transform:translateY(1px)}
    .rangeRow .num{
      width:120px;max-width:38vw;
      padding:10px;border-radius:12px;border:1px solid #d1d5db;background:#fff;
      font-weight:900;
    }
    .rangeRow .unit{font-weight:900;color:#374151}

    input[type="range"]{
      -webkit-appearance:none;appearance:none;
      width:100%;
      height:14px;
      border-radius:999px;
      background:linear-gradient(90deg, rgba(108,92,231,.35), rgba(75,58,203,.25));
      outline:none;
      border:1px solid rgba(108,92,231,.28);
    }
    input[type="range"]::-webkit-slider-thumb{
      -webkit-appearance:none;appearance:none;
      width:28px;height:28px;border-radius:50%;
      background:linear-gradient(90deg, var(--violet-dark), var(--violet));
      border:4px solid #fff;
      box-shadow:0 6px 16px rgba(0,0,0,.18);
      cursor:pointer;
    }
    input[type="range"]::-moz-range-thumb{
      width:28px;height:28px;border-radius:50%;
      background:linear-gradient(90deg, var(--violet-dark), var(--violet));
      border:4px solid #fff;
      box-shadow:0 6px 16px rgba(0,0,0,.18);
      cursor:pointer;
    }
    input[type="range"]::-moz-range-track{
      height:14px;border-radius:999px;
      background:linear-gradient(90deg, rgba(108,92,231,.35), rgba(75,58,203,.25));
      border:1px solid rgba(108,92,231,.28);
    }
    .bubble{
      position:absolute;
      right:12px;
      top:12px;
      background:#fff;
      border:1px solid rgba(108,92,231,.25);
      border-radius:999px;
      padding:6px 10px;
      font-weight:900;
      box-shadow:0 6px 14px rgba(0,0,0,.07);
      display:none;
    }
    .bubble.show{display:inline-block}

    /* ===== Results ===== */
    .results{
      margin-top:16px;padding:14px;border-radius:14px;
      border:1px solid rgba(108,92,231,.25);
      background:linear-gradient(90deg, rgba(108,92,231,.10), rgba(75,58,203,.08));
      display:none;
    }
    .hero{
      display:grid;grid-template-columns:1.1fr .9fr;gap:12px;align-items:stretch;
    }
    @media (max-width: 840px){ .hero{grid-template-columns:1fr} }

    .heroCard{
      background:#fff;border:1px solid rgba(108,92,231,.22);
      border-radius:14px;padding:12px;
    }
    .bigPlanet{
      font-size:2rem;font-weight:900;color:var(--violet-dark);line-height:1.1;
    }
    .bigPlanet .small{font-size:1rem;color:var(--muted);font-weight:800}
    .scoreLine{margin-top:6px;color:#111827;font-weight:900}
    .meter{
      height:12px;border-radius:999px;background:#fff;border:1px solid rgba(108,92,231,.25);
      overflow:hidden;margin-top:10px;
    }
    .meter > div{height:100%;width:0%}
    .pillRow{margin-top:10px}
    .pill{
      display:inline-flex;align-items:center;gap:8px;padding:8px 10px;border-radius:999px;
      background:#fff;border:1px solid rgba(108,92,231,.25);font-weight:900;margin:6px 6px 0 0;
    }
    .pill .dot{width:10px;height:10px;border-radius:999px;display:inline-block}

    canvas{
      width:100%;max-width:520px;height:auto;background:#fff;
      border:1px solid rgba(108,92,231,.20);border-radius:14px;padding:6px;
    }

    .shareBox{margin-top:12px;padding:12px;border-radius:14px;background:#fff;border:1px solid rgba(108,92,231,.22)}
    .shareText{
      width:100%;min-height:110px;resize:vertical;border-radius:12px;border:1px solid #d1d5db;padding:10px;font-size:.92rem;
    }

    /* ===== SEO content ===== */
    .toc{
      margin-top:12px;
      padding:12px;border-radius:14px;
      background:#fff;border:1px solid var(--border);
    }
    .toc a{color:var(--violet-dark);font-weight:900;text-decoration:none}
    .toc a:hover{text-decoration:underline}
    .toc ul{margin:8px 0 0 18px}
    .toc li{margin:6px 0}

    /* ===== FOOTER Syncras ===== */
    .syncras-footer{
      margin-top:32px;padding:2.5rem 1.5rem 1.5rem;background:#2b1840;color:#f3eaff;font-size:.9rem;
    }
    .syncras-footer a{color:#f3eaff;text-decoration:none}
    .syncras-footer a:hover{text-decoration:underline}
    .footer-inner{
      max-width:980px;margin:0 auto 1.5rem auto;
      display:grid;grid-template-columns:repeat(auto-fit, minmax(220px,1fr));
      gap:2rem;
    }
    .footer-column h4{margin-top:0;margin-bottom:.7rem;font-size:1rem}
    .footer-column p{margin:0;font-size:.85rem}
    .footer-column ul{list-style:none;padding:0;margin:0}
    .footer-column li{margin-bottom:.4rem;font-size:.85rem}
    .footer-bottom{max-width:980px;margin:0 auto;text-align:center;font-size:.8rem;opacity:.9}
    .footer-bottom p{margin:4px 0}

    /* Cookie banner */
    #cookie-banner{
      position:fixed;bottom:20px;left:50%;transform:translateX(-50%);
      max-width:90%;width:420px;background:#ffffff;border:2px solid #6C5CE7;border-radius:10px;
      padding:16px;box-shadow:0 4px 8px rgba(0,0,0,0.15);
      z-index:9999;font-family:Arial, sans-serif;display:none;
    }
    #cookie-banner p{margin:0 0 12px 0;font-size:.95rem;color:#333;line-height:1.4}
    #cookie-banner a{color:#6C5CE7;font-weight:bold;text-decoration:none}
    #cookie-reject{
      flex:1;background:white;color:#111827;border:2px solid #6C5CE7;
      padding:10px 12px;border-radius:6px;cursor:pointer;font-weight:700;
    }
    #cookie-btn{
      flex:1;background:#6C5CE7;color:white;border:2px solid #6C5CE7;
      padding:10px 16px;border-radius:6px;cursor:pointer;font-weight:800;
    }
    #cookie-btn:hover{background:#4B3ACB}
  </style>
</head>

<body>
  <header class="site-header">
    <div class="header-inner">
      <div class="logo">Syncras.App</div>

      <button class="menu-toggle" type="button" onclick="toggleMenu()" aria-label="Apri o chiudi il menu di navigazione">
        Menu <span>‚ò∞</span>
      </button>

      <nav id="main-nav">
        <a href="index.html">Home</a>
        <a href="blog.html">Blog</a>
        <a href="smart-test.html">Smart Test</a>
        <a href="calcolatori.html">Calcolatori</a>
        <a href="fast-cards.html">Fast Card</a>
        <a href="offerte.html">Prodotti Consapevoli</a>
        <a href="curiosita.html">Curiosit√†</a>
        <a href="misteri.html">Misteri</a>
        <a href="chi.html">Chi siamo</a>
      </nav>
    </div>
  </header>

  <main>
    <span class="badge">Carbon Footprint</span>
    <h1>Calcolatore Impronta di Carbonio 2026: CO‚ÇÇ/anno e Pianeti Terra üåç</h1>
    <p class="sub">
      <p style="margin:10px 0 0; color:#374151; font-weight:700;">
  Questo <strong>calcolatore di impronta di carbonio</strong> stima in modo rapido le tue emissioni in
  <strong>tonnellate di CO‚ÇÇ all‚Äôanno</strong> e le traduce in <strong>Pianeti Terra</strong>.
  √à una stima indicativa (fattori medi) ma utilissima per capire <strong>da dove arriva il ‚Äúpeso‚Äù</strong>
  e qual √® il primo passo pi√π efficace per ridurlo.
</p>

      6‚Äì8 domande, 60 secondi. Output in <strong>Pianeti Terra</strong>, tonnellate CO‚ÇÇ/anno, equivalenze intuitive
      + confronto con media e obiettivo clima. Risultato condivisibile.
    </p>

    <div class="topbar">
      <div>
        <div style="font-weight:900;">üéØ Obiettivo Syncras</div>
        <div class="hint">Non per sentirti in colpa: per capire <strong>dove pesa davvero</strong> e scegliere il ‚Äúprimo passo‚Äù pi√π efficace.</div>
      </div>
      <div style="display:flex; gap:10px; flex-wrap:wrap;">
        <button class="btn secondary" id="resetBtn" type="button">‚Ü∫ Reset</button>
        <button class="btn" id="calcBtn" type="button">üßÆ Calcola impronta</button>
      </div>
    </div>

    <!-- Mini indice (SEO + UX) -->
    <div class="toc">
      <div style="font-weight:900;color:var(--violet-dark)">Vai a:</div>
      <ul>
        <li><a href="#input">Domande del calcolatore</a></li>
        <li><a href="#risultato">Risultato: Pianeti Terra e t CO‚ÇÇ/anno</a></li>
        <li><a href="#guida">Come interpretare il risultato</a></li>
        <li><a href="#faq">FAQ impronta di carbonio</a></li>
      </ul>
    </div>

    <div class="legal-warning" id="legalWarning">
      üí° <strong>Prima di procedere:</strong> per usare il simulatore devi dichiarare di aver letto e accettato le
      <a href="note-legali.html" target="_blank" rel="noopener">Note Legali</a>. Spunta la casella qui sotto.
    </div>

    <div class="legal" id="legalBox">
      <label style="display:flex; gap:10px; align-items:flex-start;">
        <input type="checkbox" id="legalAccept" style="margin-top:4px;">
        <span>
          Risultati = <strong>stime indicative</strong> basate su fattori medi. Dettagli nelle
          <a href="note-legali.html" target="_blank" rel="noopener">Note Legali</a>.
          <span style="display:block; margin-top:6px; color:var(--muted); font-size:.82rem;">
            I dati non vengono inviati a server: il calcolo avviene nel tuo browser.
          </span>
        </span>
      </label>
    </div>

    <!-- ================== INPUTS ================== -->
    <section class="section" id="input">
      <div class="sectionHead">
        <h2>üöó Mobilit√† (di solito √® qui che ‚Äúscoppia‚Äù tutto)</h2>
        <small>Km auto + alimentazione + voli</small>
      </div>

      <div class="grid2">
        <div class="control" id="ctrlKm">
          <label>
            Km in auto al mese
            <span class="value" id="kmValue">800 km</span>
          </label>

          <div class="rangeWrap">
            <input id="kmMonth" type="range" min="0" max="4000" step="50" value="800" aria-label="Km in auto al mese">
            <div class="rangeRow">
              <button class="pm" type="button" data-step="-50" data-target="kmMonth" aria-label="Diminuisci km">‚àí</button>
              <input class="num" id="kmNum" type="number" min="0" max="4000" step="50" value="800" inputmode="numeric" aria-label="Km in auto al mese (numero)">
              <span class="unit">km</span>
              <button class="pm" type="button" data-step="50" data-target="kmMonth" aria-label="Aumenta km">+</button>
            </div>
          </div>

          <div class="mini">Suggerimento: 0 se non hai auto o la usi pochissimo.</div>
        </div>

        <div class="control">
          <label>Alimentazione auto <span class="value" id="carTypeLabel">Benzina</span></label>
          <div class="choices" id="carType">
            <div class="chip active" data-val="petrol">‚õΩ Benzina <small>(media)</small></div>
            <div class="chip" data-val="diesel">üõ¢Ô∏è Diesel <small>(media)</small></div>
            <div class="chip" data-val="gpl">üü¢ GPL <small>(media)</small></div>
            <div class="chip" data-val="metano">üîµ Metano <small>(CNG)</small></div>
            <div class="chip" data-val="hybrid">üîã Ibrida <small>(media)</small></div>
            <div class="chip" data-val="ev">‚ö° Elettrica <small>(mix rete)</small></div>
          </div>
          <div class="mini">Sono stime ‚Äúmedie‚Äù. Se vuoi, potremo aggiungere una modalit√† avanzata (consumo reale).</div>
        </div>
      </div>

      <div class="control" id="ctrlFlights" style="margin-top:12px;">
        <label>
          Voli aerei / anno
          <span class="value" id="flightsValue">0</span>
        </label>

        <div class="rangeWrap">
          <input id="flightsYear" type="range" min="0" max="12" step="1" value="0" aria-label="Voli aerei all'anno">
          <div class="rangeRow">
            <button class="pm" type="button" data-step="-1" data-target="flightsYear" aria-label="Diminuisci voli">‚àí</button>
            <input class="num" id="flightsNum" type="number" min="0" max="12" step="1" value="0" inputmode="numeric" aria-label="Voli aerei all'anno (numero)">
            <span class="unit">voli</span>
            <button class="pm" type="button" data-step="1" data-target="flightsYear" aria-label="Aumenta voli">+</button>
          </div>
        </div>

        <div class="mini">1 volo = ‚Äúandata e ritorno breve‚Äù considerato come unit√† semplificata.</div>
      </div>
    </section>

    <section class="section">
      <div class="sectionHead">
        <h2>ü•© Alimentazione (la parte che sorprende)</h2>
        <small>Carne rossa: pochi numeri, tanto impatto</small>
      </div>

      <div class="control" id="ctrlMeat">
        <label>
          Carne rossa a settimana
          <span class="value" id="meatValue">2 volte</span>
        </label>

        <div class="rangeWrap">
          <input id="meatWeek" type="range" min="0" max="14" step="1" value="2" aria-label="Carne rossa a settimana">
          <div class="rangeRow">
            <button class="pm" type="button" data-step="-1" data-target="meatWeek" aria-label="Diminuisci carne">‚àí</button>
            <input class="num" id="meatNum" type="number" min="0" max="14" step="1" value="2" inputmode="numeric" aria-label="Carne rossa a settimana (numero)">
            <span class="unit">volte</span>
            <button class="pm" type="button" data-step="1" data-target="meatWeek" aria-label="Aumenta carne">+</button>
          </div>
        </div>

        <div class="mini">0 = quasi vegetariano. 14 = ‚Äúdue volte al giorno‚Äù.</div>
      </div>
    </section>

    <section class="section">
      <div class="sectionHead">
        <h2>üè† Casa (riscaldamento + solare)</h2>
        <small>Qui contano tecnologia e abitudini</small>
      </div>

      <div class="grid2">
        <div class="control">
          <label>Tipo di riscaldamento <span class="value" id="heatTypeLabel">Metano</span></label>
          <div class="choices" id="heatType">
            <div class="chip active" data-val="gas">üî• Metano <small>(medio)</small></div>
            <div class="chip" data-val="hp">üå± Pompa di calore <small>(media)</small></div>
            <div class="chip" data-val="pellet">ü™µ Pellet <small>(stima)</small></div>
            <div class="chip" data-val="none">‚ùå Nessuno <small>(o minimo)</small></div>
          </div>
          <div class="mini">Stima annuale ‚Äúper persona‚Äù (semplificata).</div>
        </div>

        <div class="control">
          <label>Hai fotovoltaico? <span class="value" id="pvLabel">No</span></label>
          <div class="choices" id="pvChoice">
            <div class="chip active" data-val="no">‚ùå No</div>
            <div class="chip" data-val="yes">‚òÄÔ∏è S√¨</div>
          </div>
          <div class="mini">Riduce la quota ‚Äúelettricit√†‚Äù (stima).</div>
        </div>
      </div>
    </section>

    <section class="section">
      <div class="sectionHead">
        <h2>üõçÔ∏è Consumi (shopping ‚Äúnuovo‚Äù)</h2>
        <small>Non moralismo: √® solo un pezzo del puzzle</small>
      </div>

      <div class="control" id="ctrlShop">
        <label>
          Shopping / oggetti nuovi al mese
          <span class="value" id="shopValue">150 ‚Ç¨</span>
        </label>

        <div class="rangeWrap">
          <input id="shopMonth" type="range" min="0" max="800" step="10" value="150" aria-label="Shopping al mese">
          <div class="rangeRow">
            <button class="pm" type="button" data-step="-10" data-target="shopMonth" aria-label="Diminuisci shopping">‚àí</button>
            <input class="num" id="shopNum" type="number" min="0" max="800" step="10" value="150" inputmode="numeric" aria-label="Shopping al mese (numero)">
            <span class="unit">‚Ç¨</span>
            <button class="pm" type="button" data-step="10" data-target="shopMonth" aria-label="Aumenta shopping">+</button>
          </div>
        </div>

        <div class="mini">Include elettronica, abbigliamento, ‚Äúrobe che arrivano‚Äù. Stima grezza, ma utile.</div>
      </div>
    </section>

    <div style="display:flex; justify-content:flex-end; gap:10px; flex-wrap:wrap; margin-top:12px;">
      <button class="btn" id="calcBtnBottom" type="button">üßÆ Calcola (in fondo)</button>
    </div>

    <!-- ================== RISULTATI ================== -->
    <section class="results" id="results">
      <h2 id="risultato" style="margin:0 0 8px;color:var(--violet-dark)">üìç Risultato (condivisibile)</h2>

      <div class="hero">
        <div class="heroCard" aria-live="polite">
          <div class="bigPlanet">
            <span id="planetsOut">‚Äî</span> <span class="small">Pianeti Terra</span>
          </div>
          <div class="scoreLine">Impronta stimata: <span id="tco2Out">‚Äî</span> t CO‚ÇÇ / anno</div>
          <div class="hint" style="margin-top:6px;">
            Se tutti vivessero come te, servirebbero <strong><span id="planetsOut2">‚Äî</span> Terre</strong>.
          </div>

          <div class="meter" aria-label="Indicatore di impatto">
            <div id="meterFill"></div>
          </div>
          <div class="hint" style="margin-top:8px;">
            Verde = vicino all‚Äôobiettivo. Rosso = sopra la media.
          </div>

          <div class="pillRow" id="equivs"></div>
        </div>

        <div class="heroCard">
          <div style="font-weight:900;margin-bottom:8px;">üìä Confronto rapido</div>
          <canvas id="bar" width="520" height="280" role="img" aria-label="Grafico a barre: Tu vs Media italiana vs Obiettivo">
            Il tuo browser non supporta i grafici.
          </canvas>
          <div class="hint" style="margin-top:8px;">
            ‚ÄúMedia Italia‚Äù e ‚ÄúObiettivo‚Äù sono riferimenti per orientarti. Non sono un giudizio.
          </div>
        </div>
      </div>

      <div class="heroCard" style="margin-top:12px;">
        <div style="font-weight:900;margin-bottom:6px;">üîç Da dove arriva il peso (stima per categoria)</div>
        <div class="hint">Top 3 categorie: ti dice dove agire ‚Äúsenza impazzire‚Äù.</div>
        <div id="topCats" style="margin-top:10px;"></div>
      </div>

      <div class="shareBox">
        <div style="font-weight:900; margin-bottom:8px;">üì§ Condividi</div>
        <textarea id="shareText" class="shareText" readonly></textarea>

        <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:10px;">
          <button class="btn" type="button" id="copyBtn">üìé Copia testo</button>
          <button class="btn secondary" type="button" id="shareBtn">üì≤ Condividi risultato</button>
        </div>

        <div class="hint" style="margin-top:8px;">
          Su Android/iPhone ‚ÄúCondividi risultato‚Äù apre WhatsApp/Telegram ecc.
        </div>
      </div>
    </section>

    <div class="legal-warning" style="display:block; margin-top:16px;">
      ‚ö†Ô∏è <strong>Nota legale:</strong> i risultati di questo calcolatore sono <strong>puramente indicativi</strong> e
      dipendono dai dati inseriti dall‚Äôutente e da fattori medi semplificati. Non costituiscono in alcun modo una
      <strong>consulenza professionale</strong> o una certificazione ufficiale.
    </div>

    <!-- ===== SEO content / guida ===== -->
    <section class="section" id="guida" style="margin-top:20px;line-height:1.6;padding:20px;">
      <h2>Come leggere il risultato (senza farsi prendere dal panico)</h2>
      <p>
        Il valore in <strong>Pianeti Terra</strong> √® una traduzione ‚Äúintuitiva‚Äù del tuo impatto:
        pi√π √® alto, pi√π il tuo stile di vita richiede risorse che il pianeta non riesce a rigenerare.
        La parte importante per√≤ √® <strong>il ‚ÄúTop 3‚Äù</strong>: ti dice dove intervenire con il miglior rapporto sforzo/risultato.
      </p>
      <ul>
        <li><strong>Mobilit√†</strong>: spesso √® il colpevole n.1 (km + tipo auto).</li>
        <li><strong>Riscaldamento</strong>: pesa tantissimo (metano vs pompa di calore, abitudini e isolamento).</li>
        <li><strong>Alimentazione</strong>: la carne rossa ha un peso molto pi√π alto rispetto a scelte vegetali.</li>
      </ul>
      <p class="hint">
        Vuoi la versione ‚Äúpro‚Äù con pi√π precisione (consumo reale auto, kWh casa, voli separati)? Si pu√≤ aggiungere dopo, senza rovinare la semplicit√†.
      </p>

      <div style="margin-top:14px;padding:12px;border:1px solid var(--border);border-radius:14px;background:#fff;">
        <div style="font-weight:900;color:var(--violet-dark);margin-bottom:6px;">Risorse Syncras utili</div>
        <ul style="margin:0 0 0 18px;">
          <li><a href="calcolatori.html" style="color:var(--violet-dark);font-weight:900;text-decoration:none;">Tutti i calcolatori Syncras</a></li>
          <li><a href="smart-test.html" style="color:var(--violet-dark);font-weight:900;text-decoration:none;">Smart Test: fai scelte migliori</a></li>
          <li><a href="fotovoltaico-4-kw-con-accumulo-10-kwh-quanto-costa-davvero-nel-2025.html" style="color:var(--violet-dark);font-weight:900;text-decoration:none;">Caso reale fotovoltaico</a></li>
        </ul>
      </div>
    </section>

    <section class="section" id="faq" style="margin-top:14px;">
      <div class="sectionHead">
        <h2>FAQ: impronta di carbonio</h2>
        <small>Domande rapide (e risposte utili)</small>
      </div>
      <details style="padding:10px 0;border-top:1px solid #eee;">
        <summary style="font-weight:900;cursor:pointer;">Quanto √® affidabile questo calcolatore?</summary>
        <div class="hint" style="margin-top:8px;">
          √à una <strong>stima indicativa</strong> basata su fattori medi. Serve per capire il ‚Äúpeso relativo‚Äù delle tue abitudini e dove conviene intervenire per primo.
        </div>
      </details>
      <details style="padding:10px 0;border-top:1px solid #eee;">
        <summary style="font-weight:900;cursor:pointer;">Perch√© ‚ÄúPianeti Terra‚Äù?</summary>
        <div class="hint" style="margin-top:8px;">
          Perch√© un numero emotivo (ma chiaro) spesso funziona meglio di una sigla: ti aiuta a capire subito se sei ‚Äúvicino al target‚Äù o molto sopra.
        </div>
      </details>
      <details style="padding:10px 0;border-top:1px solid #eee;">
        <summary style="font-weight:900;cursor:pointer;">I miei dati vengono salvati?</summary>
        <div class="hint" style="margin-top:8px;">
          No: i valori restano nel tuo browser. Se accetti i cookie, viene caricato Google Analytics con IP anonimizzato per misurare le visite (non i tuoi input).
        </div>
      </details>
    </section>

  </main>

  <footer class="syncras-footer">
    <div class="footer-inner">
      <div class="footer-column">
        <h4>Syncras.App</h4>
        <p>
          Metodo SmartShop per fare acquisti con la testa (e con un po‚Äô di ironia).<br>
          Niente tecnicismi inutili, solo esperienze reali e numeri spiegati semplice.
        </p>
      </div>

      <div class="footer-column">
        <h4>Link utili</h4>
        <ul>
          <li><a href="blog.html">Tutte le guide SmartShop</a></li>
          <li><a href="offerte.html">Offerte Amazon selezionate</a></li>
          <li><a href="calcolatori.html">Tutti i calcolatori</a></li>
          <li><a href="fotovoltaico-4-kw-con-accumulo-10-kwh-quanto-costa-davvero-nel-2025.html">Caso reale fotovoltaico</a></li>
        </ul>
      </div>

      <div class="footer-column">
        <h4>Legale & Privacy</h4>
        <ul>
          <li><a href="privacy.html">Privacy Policy</a></li>
          <li><a href="cookie.html">Cookie Policy</a></li>
          <li><a href="disclaimer-amazon.html">Disclaimer Amazon</a></li>
          <li><a href="note-legali.html">Note Legali</a></li>
        </ul>
      </div>
    </div>

    <div class="footer-bottom">
      <p>¬© <span id="year-span"></span> Syncras.App ‚Äî Tutti i diritti riservati.</p>
      <p>
        Syncras.App partecipa al Programma Affiliazione Amazon EU.
        Acquistando tramite i link presenti nelle pagine, il sito pu√≤ ricevere una piccola commissione
        senza alcun costo aggiuntivo per l‚Äôutente.
      </p>
      <p>
        Per ordini, resi, spedizioni o dati relativi agli acquisti, √® necessario rivolgersi
        direttamente al servizio clienti Amazon tramite il proprio account.
      </p>
    </div>
  </footer>

  <div id="cookie-banner">
    <p>
      Usiamo cookie tecnici e dati aggregati per migliorare il sito e misurare le visite (Google Analytics).
      Alcuni link potrebbero essere di affiliazione.
      Per dettagli leggi la <a href="cookie.html">Cookie Policy</a> e la
      <a href="privacy.html">Privacy Policy</a>.
    </p>
    <div style="display:flex; gap:10px; margin-top:8px;">
      <button id="cookie-reject" type="button" onclick="rejectCookies()">Rifiuta</button>
      <button id="cookie-btn" type="button" onclick="acceptCookies()">Accetta e continua</button>
    </div>
  </div>

  <script>
    function toggleMenu(){ document.body.classList.toggle('nav-open'); }

    // ===== DOM
    const legalEl = document.getElementById("legalAccept");
    const legalWarning = document.getElementById("legalWarning");
    const legalBox = document.getElementById("legalBox");

    const kmMonth = document.getElementById("kmMonth");
    const kmNum = document.getElementById("kmNum");
    const kmValue = document.getElementById("kmValue");

    const flightsYear = document.getElementById("flightsYear");
    const flightsNum = document.getElementById("flightsNum");
    const flightsValue = document.getElementById("flightsValue");

    const meatWeek = document.getElementById("meatWeek");
    const meatNum = document.getElementById("meatNum");
    const meatValue = document.getElementById("meatValue");

    const shopMonth = document.getElementById("shopMonth");
    const shopNum = document.getElementById("shopNum");
    const shopValue = document.getElementById("shopValue");

    const resultsBox = document.getElementById("results");
    const planetsOut = document.getElementById("planetsOut");
    const planetsOut2 = document.getElementById("planetsOut2");
    const tco2Out = document.getElementById("tco2Out");
    const meterFill = document.getElementById("meterFill");
    const equivs = document.getElementById("equivs");
    const topCats = document.getElementById("topCats");

    const shareTextEl = document.getElementById("shareText");
    const copyBtn = document.getElementById("copyBtn");
    const shareBtn = document.getElementById("shareBtn");

    const carTypeWrap = document.getElementById("carType");
    const carTypeLabel = document.getElementById("carTypeLabel");

    const heatTypeWrap = document.getElementById("heatType");
    const heatTypeLabel = document.getElementById("heatTypeLabel");

    const pvChoiceWrap = document.getElementById("pvChoice");
    const pvLabel = document.getElementById("pvLabel");

    const calcBtn = document.getElementById("calcBtn");
    const calcBtnBottom = document.getElementById("calcBtnBottom");
    const resetBtn = document.getElementById("resetBtn");

    // ===== State
    let state = {
      car: "petrol",
      heat: "gas",
      pv: "no"
    };

    // ===== Helpers
    function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }
    function fmt1(n){ return (Math.round(n*10)/10).toFixed(1).replace(".", ","); }
    function fmt2(n){ return (Math.round(n*100)/100).toFixed(2).replace(".", ","); }

    function ensureLegalOrScroll(){
      if (legalEl && !legalEl.checked){
        if (legalWarning) legalWarning.style.display = "block";
        if (legalBox) legalBox.scrollIntoView({behavior:"smooth", block:"center"});
        return false;
      }
      if (legalWarning) legalWarning.style.display = "none";
      return true;
    }

    if (legalEl){
      legalEl.addEventListener("change", () => {
        if (legalEl.checked && legalWarning) legalWarning.style.display = "none";
      });
    }

    function setChipsActive(wrapper, val){
      wrapper.querySelectorAll(".chip").forEach(ch => {
        ch.classList.toggle("active", ch.dataset.val === val);
      });
    }
    function bindChips(wrapper, onPick){
      wrapper.querySelectorAll(".chip").forEach(ch => {
        ch.addEventListener("click", () => onPick(ch.dataset.val));
      });
    }

    // ===== UI labels
    function updateLabels(){
      kmValue.textContent = `${kmMonth.value} km`;
      flightsValue.textContent = `${flightsYear.value}`;

      const m = parseInt(meatWeek.value,10);
      meatValue.textContent = (m === 0) ? "0 volte" : (m === 1 ? "1 volta" : `${m} volte`);

      shopValue.textContent = `${shopMonth.value} ‚Ç¨`;
    }

    // ===== Range sync (slider <-> number) + bottoni +/- + tastiera
    function syncPair(rangeEl, numEl){
      const min = parseFloat(rangeEl.min);
      const max = parseFloat(rangeEl.max);
      const step = parseFloat(rangeEl.step) || 1;

      function apply(val){
        let v = parseFloat(val);
        if (!isFinite(v)) v = parseFloat(rangeEl.value) || 0;
        v = clamp(v, min, max);

        // snap to step
        const snapped = Math.round((v - min) / step) * step + min;
        const finalV = clamp(snapped, min, max);

        rangeEl.value = String(finalV);
        numEl.value = String(finalV);
        updateLabels();
      }

      rangeEl.addEventListener("input", () => apply(rangeEl.value));
      numEl.addEventListener("input", () => apply(numEl.value));
      numEl.addEventListener("blur", () => apply(numEl.value));

      // mouse wheel sul numero (comodissimo)
      numEl.addEventListener("wheel", (e) => {
        e.preventDefault();
        const dir = e.deltaY > 0 ? -1 : 1;
        apply((parseFloat(numEl.value)||0) + dir*step);
      }, {passive:false});

      apply(rangeEl.value);
    }

    syncPair(kmMonth, kmNum);
    syncPair(flightsYear, flightsNum);
    syncPair(meatWeek, meatNum);
    syncPair(shopMonth, shopNum);

    // bottoni +/- universali
    document.querySelectorAll(".pm").forEach(btn => {
      btn.addEventListener("click", () => {
        const step = parseFloat(btn.dataset.step);
        const targetId = btn.dataset.target;
        const rangeEl = document.getElementById(targetId);
        if (!rangeEl) return;

        // trova il numero associato (per convenzione: kmMonth->kmNum ecc.)
        const numId = targetId.replace("Month","Num").replace("Year","Num").replace("Week","Num");
        const numEl = document.getElementById(numId);

        const v = (parseFloat(rangeEl.value)||0) + step;
        const min = parseFloat(rangeEl.min), max = parseFloat(rangeEl.max);
        const stepAbs = parseFloat(rangeEl.step) || 1;

        let next = clamp(v, min, max);
        next = Math.round((next - min)/stepAbs)*stepAbs + min;
        next = clamp(next, min, max);

        rangeEl.value = String(next);
        if (numEl) numEl.value = String(next);
        updateLabels();
      });
    });

    // ===== Chips bind
    bindChips(carTypeWrap, (val) => {
      state.car = val;
      setChipsActive(carTypeWrap, val);
      const map = {
        petrol:"Benzina",
        diesel:"Diesel",
        gpl:"GPL",
        metano:"Metano",
        hybrid:"Ibrida",
        ev:"Elettrica"
      };
      carTypeLabel.textContent = map[val] || "‚Äî";
    });

    bindChips(heatTypeWrap, (val) => {
      state.heat = val;
      setChipsActive(heatTypeWrap, val);
      const map = {gas:"Metano", hp:"Pompa di calore", pellet:"Pellet", none:"Nessuno"};
      heatTypeLabel.textContent = map[val] || "‚Äî";
    });

    bindChips(pvChoiceWrap, (val) => {
      state.pv = val;
      setChipsActive(pvChoiceWrap, val);
      pvLabel.textContent = (val === "yes") ? "S√¨" : "No";
    });

    // ===== Core model (semplice, indicativo)
    // kg CO2 per km (stima media)
    const CAR_FACTORS = {
      petrol: 0.192,
      diesel: 0.171,
      gpl: 0.150,
      metano: 0.135,
      hybrid: 0.120,
      ev: 0.050
    };

    const FACTORS = {
      flight_t_per_unit: 0.25,
      meat_t_per_week_unit: 0.10,
      heat_t_per_person_year: { gas: 1.8, hp: 0.8, pellet: 1.0, none: 0.2 },
      electricity_t_per_person_year: 1.2,
      pv_electricity_reduction: 0.35,
      shopping_t_per_100eur_month: 0.18
    };

    function compute(){
      const km = parseFloat(kmMonth.value) || 0;
      const flights = parseFloat(flightsYear.value) || 0;
      const meat = parseFloat(meatWeek.value) || 0;
      const shop = parseFloat(shopMonth.value) || 0;

      const carKgKm = CAR_FACTORS[state.car] ?? 0.18;
      const t_car = (km * 12 * carKgKm) / 1000;

      const t_flights = flights * FACTORS.flight_t_per_unit;
      const t_meat = meat * FACTORS.meat_t_per_week_unit;

      const t_heat = FACTORS.heat_t_per_person_year[state.heat] ?? 1.2;

      let t_elec = FACTORS.electricity_t_per_person_year;
      if (state.pv === "yes") t_elec = t_elec * (1 - FACTORS.pv_electricity_reduction);

      const t_shop = (shop / 100) * FACTORS.shopping_t_per_100eur_month;

      const byCat = {
        "Mobilit√† (auto)": t_car,
        "Voli": t_flights,
        "Alimentazione": t_meat,
        "Riscaldamento": t_heat,
        "Elettricit√†": t_elec,
        "Shopping": t_shop
      };

      const total = Object.values(byCat).reduce((a,b)=>a+b,0);
      return { total, byCat };
    }

    // ===== Output mapping
    const REF = {
      italy_avg: 7.0,
      target: 2.0
    };

    function planetsFromTotal(t){
      return Math.max(0.7, t / REF.target);
    }

    function treesEquivalent(t){
      return Math.round(t / 0.02); // super semplificato
    }
    function pandaKmEquivalent(t){
      return Math.round(t / 0.00014); // semplificato
    }

    function impactColor(t){
      const good = getComputedStyle(document.documentElement).getPropertyValue('--good').trim();
      const warn = getComputedStyle(document.documentElement).getPropertyValue('--warn').trim();
      const bad  = getComputedStyle(document.documentElement).getPropertyValue('--bad').trim();
      if (t <= REF.target) return good;
      if (t <= REF.italy_avg) return warn;
      return bad;
    }

    function drawBar(tUser){
      const canvas = document.getElementById("bar");
      const ctx = canvas.getContext("2d");
      const w = canvas.width, h = canvas.height;
      ctx.clearRect(0,0,w,h);

      ctx.fillStyle = "#fff";
      ctx.fillRect(0,0,w,h);

      const pad = 46;
      const baseY = h - 50;
      const maxVal = Math.max(tUser, REF.italy_avg, REF.target, 10);
      const scale = (baseY - 30) / maxVal;

      const bars = [
        {label:"TU", val:tUser, color: impactColor(tUser)},
        {label:"MEDIA IT", val:REF.italy_avg, color:"#9ca3af"},
        {label:"OBIETTIVO", val:REF.target, color:"#10b981"}
      ];

      ctx.strokeStyle = "rgba(108,92,231,.35)";
      ctx.lineWidth = 1;
      ctx.beginPath();
      ctx.moveTo(pad, 20);
      ctx.lineTo(pad, baseY);
      ctx.lineTo(w - 20, baseY);
      ctx.stroke();

      ctx.fillStyle = "#6b7280";
      ctx.font = "700 12px Arial";
      const ticks = 4;
      for (let i=0;i<=ticks;i++){
        const v = (maxVal/ticks)*i;
        const y = baseY - v*scale;
        ctx.strokeStyle = "rgba(17,24,39,.08)";
        ctx.beginPath();
        ctx.moveTo(pad, y);
        ctx.lineTo(w - 20, y);
        ctx.stroke();
        ctx.fillStyle = "#6b7280";
        ctx.fillText(`${Math.round(v)} t`, 10, y+4);
      }

      const barW = 110;
      const gap = 45;
      const startX = pad + 30;

      bars.forEach((b, idx) => {
        const x = startX + idx*(barW+gap);
        const bh = b.val * scale;
        const y = baseY - bh;

        ctx.fillStyle = b.color;
        ctx.fillRect(x, y, barW, bh);

        ctx.fillStyle = "#111827";
        ctx.font = "900 12px Arial";
        ctx.textAlign = "center";
        ctx.fillText(b.label, x + barW/2, baseY + 18);

        ctx.font = "900 13px Arial";
        ctx.fillText(`${fmt1(b.val)} t`, x + barW/2, y - 8);
        ctx.textAlign = "left";
      });
    }

    function render(){
      const { total, byCat } = compute();
      const planets = planetsFromTotal(total);

      planetsOut.textContent = fmt1(planets);
      planetsOut2.textContent = fmt1(planets);
      tco2Out.textContent = fmt1(total);

      const capped = clamp(planets, 0, 6);
      const pct = (capped / 6) * 100;
      meterFill.style.width = `${pct}%`;
      meterFill.style.background = impactColor(total);

      equivs.innerHTML = "";
      const trees = treesEquivalent(total);
      const pandaKm = pandaKmEquivalent(total);

      const pills = [
        {text:`üå≥ ‚âà ${trees} alberi/anno`, color:"#10b981"},
        {text:`üöó ‚âà ${pandaKm.toLocaleString("it-IT")} km (Panda '90)`, color:"#ef4444"},
        {text:`üéØ Target: ${REF.target.toString().replace(".",",")} t/anno`, color:"#10b981"}
      ];
      pills.forEach(p => {
        const d = document.createElement("div");
        d.className = "pill";
        const dot = document.createElement("span");
        dot.className="dot";
        dot.style.background = p.color;
        d.appendChild(dot);
        d.appendChild(document.createTextNode(p.text));
        equivs.appendChild(d);
      });

      const sortedCats = Object.entries(byCat).sort((a,b)=>b[1]-a[1]);
      const top3 = sortedCats.slice(0,3);

      topCats.innerHTML = "";
      top3.forEach((x, i) => {
        const row = document.createElement("div");
        row.className = "pill";
        row.style.display = "flex";
        row.style.justifyContent = "space-between";
        row.style.width = "100%";
        row.style.maxWidth = "640px";
        row.style.margin = "8px 0 0 0";
        const left = document.createElement("span");
        left.textContent = `#${i+1} ${x[0]}`;
        const right = document.createElement("span");
        right.textContent = `${fmt2(x[1])} t/anno`;
        row.appendChild(left);
        row.appendChild(right);
        topCats.appendChild(row);
      });

      // LINK: per ora metto home (poi mettiamo il link definitivo quando pubblichi)
      const url = "https://syncras.app/calcolatore-impronta-di-carbonio.html";

      shareTextEl.value =
`üåç Impronta di carbonio (Syncras) ‚Äî risultato rapido

ü™ê Pianeti Terra: ${fmt1(planets)}
üå´Ô∏è Emissioni: ${fmt1(total)} t CO‚ÇÇ/anno

Top 3 ‚Äúpesi‚Äù:
${top3.map((x,i)=>`${i+1}) ${x[0]} ‚âà ${fmt2(x[1])} t/anno`).join("\n")}

Equivalenze:
üå≥ ‚âà ${trees} alberi/anno
üöó ‚âà ${pandaKm.toLocaleString("it-IT")} km (Panda '90)

Fai il test anche tu:
üëâ ${url}`;

      drawBar(total);

      resultsBox.style.display = "block";
      resultsBox.scrollIntoView({behavior:"smooth", block:"start"});
    }

    function runCalc(){
      if (!ensureLegalOrScroll()) return;
      render();
    }

    [calcBtn, calcBtnBottom].forEach(btn => btn && btn.addEventListener("click", runCalc));
    resetBtn.addEventListener("click", () => location.reload());

    copyBtn.addEventListener("click", async () => {
      try{
        await navigator.clipboard.writeText(shareTextEl.value);
        alert("Testo copiato ‚úÖ");
      }catch(e){
        alert("Copia automatica non disponibile: seleziona il testo e copia manualmente.");
      }
    });

    shareBtn.addEventListener("click", async () => {
      const text = shareTextEl.value;
      if (navigator.share){
        try{ await navigator.share({ text }); }catch(e){}
      }else{
        try{
          await navigator.clipboard.writeText(text);
          alert("Condivisione non supportata: testo copiato ‚úÖ (incolla su WhatsApp).");
        }catch(e){
          alert("Condivisione non supportata: copia manualmente il testo.");
        }
      }
    });

    document.addEventListener('DOMContentLoaded', function () {
      const span = document.getElementById('year-span');
      if (span) span.textContent = new Date().getFullYear();
      updateLabels();
    });
  </script>

  <!-- GDPR / GA (stesso stile/approccio Syncras) -->
  <script>
  (function () {
    const GA_ID = 'G-CFTTCYDZ2P';
    const CONSENT_KEY = 'syncras_cookie_consent';

    window['ga-disable-' + GA_ID] = true;

    function loadGoogleAnalytics() {
      if (window.__syncrasGaLoaded) return;
      window.__syncrasGaLoaded = true;

      window['ga-disable-' + GA_ID] = false;

      const gaScript = document.createElement('script');
      gaScript.async = true;
      gaScript.src = 'https://www.googletagmanager.com/gtag/js?id=' + GA_ID;
      document.head.appendChild(gaScript);

      window.dataLayer = window.dataLayer || [];
      function gtag(){ dataLayer.push(arguments); }
      window.gtag = gtag;
      gtag('js', new Date());
      gtag('config', GA_ID, { anonymize_ip: true });
    }

    function showBanner() {
      const banner = document.getElementById('cookie-banner');
      if (banner) banner.style.display = 'block';
    }
    function hideBanner() {
      const banner = document.getElementById('cookie-banner');
      if (banner) banner.style.display = 'none';
    }

    window.acceptCookies = function () {
      localStorage.setItem(CONSENT_KEY, 'yes');
      hideBanner();
      loadGoogleAnalytics();
    };

    window.rejectCookies = function () {
      localStorage.setItem(CONSENT_KEY, 'no');
      hideBanner();
      window['ga-disable-' + GA_ID] = true;
    };

    window.revokeCookies = function () {
      localStorage.removeItem(CONSENT_KEY);
      window['ga-disable-' + GA_ID] = true;
      showBanner();
    };

    document.addEventListener('DOMContentLoaded', function () {
      const consent = localStorage.getItem(CONSENT_KEY);

      if (consent === 'yes') {
        loadGoogleAnalytics();
      } else if (consent === 'no') {
        window['ga-disable-' + GA_ID] = true;
      } else {
        showBanner();
      }
    });
  })();
  </script>

</body>
</html>


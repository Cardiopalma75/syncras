<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calcolatore Rata Finanziamento & Piano Ammortamento Mutuo (Francese/Italiana) | Syncras.App</title>
    <meta name="description" content="Calcola la rata di un finanziamento, il piano di ammortamento di un mutuo (francese o italiana) e la rata massima sostenibile in base al tuo reddito. Strumenti gratuiti e semplici.">
    <meta name="robots" content="index,follow">
    <link rel="canonical" href="https://www.tuosito.it/calcolatore-finanziamenti-mutui.html">
    
    <link rel="preload" href="https://www.googletagmanager.com/gtag/js?id=G-59D9XRYKF3" as="script">

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-59D9XRYKF3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-59D9XRYKF3');
    </script>

    <style>
      :root {
        --violet-main: #6C5CE7;
        --violet-dark: #4B3ACB;
        --violet-soft: #A29BFE;
        --text-main: #403E43;
        --bg-page: #F7F7FB;
        --color-shadow: rgba(0,0,0,0.08); /* Aggiunto per uniformit√† */
      }

      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: var(--bg-page);
        color: var(--text-main);
        line-height: 1.6;
        transition: padding-top 0.3s; /* Per transizione menu */
      }

      /* HEADER */

      .site-header {
        background: linear-gradient(90deg, var(--violet-dark), var(--violet-main));
        color: white;
        padding: 12px 14px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.15);
        position: sticky; /* Rende l'header fisso in cima */
        top: 0;
        z-index: 100;
      }

      .header-inner {
        max-width: 1180px;
        margin: 0 auto;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 16px;
      }

      .logo {
        font-size: 1.4rem;
        font-weight: bold;
        letter-spacing: 0.03em;
      }

      #main-nav {
        display: flex;
        gap: 18px;
        font-size: 0.95rem;
      }

      #main-nav a {
        color: white;
        text-decoration: none;
        font-weight: 600;
        padding-bottom: 2px;
        border-bottom: 2px solid transparent;
        transition: border-bottom-color 0.2s;
      }

      #main-nav a:hover {
        border-bottom-color: rgba(255,255,255,0.7);
        text-decoration: none;
      }

      #main-nav a.active {
        border-bottom-color: rgba(255,255,255,0.9);
      }

      .menu-toggle {
        display: none;
        background: rgba(255,255,255,0.12);
        border: 1px solid rgba(255,255,255,0.4);
        border-radius: 6px;
        color: white;
        padding: 6px 10px;
        font-size: 0.9rem;
        cursor: pointer;
        transition: background 0.2s;
      }
      .menu-toggle:hover {
          background: rgba(255,255,255,0.25);
      }

      .menu-toggle span {
        margin-left: 4px;
        font-size: 1.1rem;
      }

      @media (max-width: 768px) {
        #main-nav {
          display: none;
          position: absolute;
          left: 0;
          right: 0;
          top: 56px; /* Altezza header */
          margin: 0;
          max-width: 100%;
          flex-direction: column;
          background-color: var(--violet-dark);
          padding: 10px 16px 12px 16px;
          box-shadow: 0 3px 6px rgba(0,0,0,0.25);
          z-index: 50;
        }

        #main-nav a {
          padding: 8px 0;
          border-bottom: none;
        }
        #main-nav a.active {
          text-decoration: underline;
        }

        body.nav-open #main-nav {
          display: flex;
        }

        .menu-toggle {
          display: inline-flex;
          align-items: center;
        }
      }

      /* MAIN */

      main {
        max-width: 1180px;
        margin: 30px auto;
        padding: 20px;
        background-color: #ffffff;
        border-radius: 10px;
        box-shadow: 0 4px 6px var(--color-shadow);
      }

      h1, h2, h3 {
        color: var(--violet-dark);
        margin-top: 0;
      }

      .page-intro {
        margin-bottom: 20px;
        border-bottom: 1px solid #e5e7eb;
        padding-bottom: 10px;
      }
      
      /* ... (Stili esistenti per badge-page, intro-text) ... */

      .calc-grid {
        display: grid;
        grid-template-columns: repeat(3, minmax(0, 1fr));
        gap: 18px;
        margin: 18px 0 26px;
      }

      .calc-card {
        background: #f4f5ff;
        border-radius: 16px;
        padding: 16px 18px 14px;
        border: 1px solid #d4d7ff;
        box-shadow: 0 4px 12px rgba(0,0,0,0.04);
        transition: transform 0.2s;
      }
      .calc-card:hover {
          transform: translateY(-2px);
          box-shadow: 0 6px 16px rgba(0,0,0,0.1);
      }
      
      /* ... (Stili esistenti per calc-card-label, h3, p, link) ... */

      @media (max-width: 1024px) {
        .calc-grid {
          grid-template-columns: repeat(2, minmax(0, 1fr));
        }
      }

      @media (max-width: 640px) {
        .calc-grid {
          grid-template-columns: 1fr;
        }
      }

      /* SEZIONI CALCOLATORI */

      .calc-section {
        margin: 32px 0;
        padding: 20px;
        border-radius: 16px;
        background: #f9fafb;
        border: 1px solid #e5e7eb;
      }
      
      /* ... (Stili esistenti per h2, p, calc-grid-inputs, calc-field) ... */

      .calc-btn {
        margin-top: 18px;
        background: var(--violet-main);
        color: #fff;
        padding: 9px 16px;
        border-radius: 7px;
        border: none;
        cursor: pointer;
        font-size: 0.95rem;
        font-weight: 600;
        transition: background 0.2s;
      }

      .calc-btn:hover {
        background: var(--violet-dark);
      }

      .calc-result {
        margin-top: 16px;
        padding: 18px; /* Aumentato il padding per maggiore respiro */
        background: #ffffff;
        border-radius: 10px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.06);
        display: none;
        font-size: 0.95rem;
        overflow-x: auto;
      }
      
      .calc-result strong {
          color: var(--violet-dark);
      }
      
      .calc-result h4 {
          margin-top: 0;
          margin-bottom: 10px;
          font-size: 1.1rem;
          color: var(--violet-dark);
          border-bottom: 1px solid #eee;
          padding-bottom: 5px;
      }
      
      .calc-result p {
          margin: 6px 0;
      }

      .small-note {
        font-size: 0.8rem;
        color: #6b7280;
        margin-top: 8px;
      }

      /* TABLE STYLES - Ottimizzati per chiarezza */
      table {
        border-collapse: collapse;
        width: 100%;
        margin-top: 15px;
        font-size: 0.85rem;
        min-width: 500px; /* Evita che la tabella diventi illeggibile su mobile */
      }

      th, td {
        border: 1px solid #e5e7eb;
        padding: 8px 10px;
        text-align: right;
      }

      th {
        background: #eef2ff;
        color: var(--violet-dark);
        text-align: center;
        font-weight: 600;
      }
      
      tbody tr:nth-child(even) {
          background-color: #fcfdff;
      }

      /* FOOTER */

      .syncras-footer {
        margin-top: 40px;
        padding: 2.5rem 1.5rem 1.5rem;
        background: #2b1840;
        color: #f3eaff;
        font-family: Arial, sans-serif;
        font-size: 0.9rem;
      }

      /* ... (Stili esistenti per footer a, footer-inner, ecc.) ... */
      
      /* Ottimizzazione Grid Footer */
      .footer-inner {
        max-width: 1180px;
        margin: 0 auto 1.5rem auto;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); /* Ottimizzato min-width */
        gap: 2rem;
      }

      .footer-bottom {
        max-width: 1180px;
        margin: 0 auto;
        text-align: center;
        font-size: 0.8rem;
        opacity: 0.9;
        border-top: 1px solid rgba(255,255,255,0.1);
        padding-top: 1rem;
      }

      /* Stile Pulsante Condividi - Unificato */
      .share-btn {
          background: var(--violet-main); 
          color:white; 
          padding:10px 15px; 
          border:none;
          border-radius:6px; 
          cursor:pointer; 
          font-weight:600;
          font-size: 0.95rem;
          transition: background 0.2s;
      }
      .share-btn:hover {
          background: var(--violet-dark);
      }
    </style>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "CalculationTool",
      "name": "Calcolatore Rata Finanziamento e Mutuo",
      "description": "Strumento per calcolare rate mensili, piano di ammortamento alla francese o all‚Äôitaliana e la rata massima sostenibile in base al reddito.",
      "url": "https://www.tuosito.it/calcolatore-finanziamenti-mutui.html",
      "potentialAction": {
        "@type": "CalculateAction",
        "target": {
          "@type": "EntryPoint",
          "urlTemplate": "https://www.tuosito.it/calcolatore-finanziamenti-mutui.html"
        },
        "description": "Calcola la rata di mutui e finanziamenti."
      }
    }
    </script>
</head>
<body>
    <header class="site-header">
      <div class="header-inner">
        <div class="logo">Syncras.App</div>
  
        <button class="menu-toggle" id="menuToggle" type="button" aria-expanded="false" aria-controls="main-nav">
          Menu <span>‚ò∞</span>
        </button>
  
        <nav id="main-nav" aria-labelledby="menuToggle">
          <a href="index.html">Home</a>
          <a href="blog.html">Blog</a>
          <a href="offerte.html">Offerte Amazon</a>
          <a href="categorie.html">Categorie</a>
          <a href="curiosita.html">Curiosit√†</a>
          <a href="misteri.html">Misteri</a>
          <a href="quiz.html">Test SmartShop</a>
          <a href="calcolatore-consumi-elettrodomestici.html">Calcolatori</a>
          <a href="calcolatore-finanziamenti-mutui.html" class="active">Finanziamenti & Mutui</a>
          <a href="chi.html">Chi siamo</a>
        </nav>
      </div>
    </header>
  
    <main>
      <div class="page-intro">
        <span class="badge-page">Area strumenti</span>
        <h1>üí∂ Calcolatore Rata Finanziamento e Mutuo Online</h1>
        <p class="intro-text">
          Inserisci importo, tasso e anni: il calcolatore ti aiuta a capire rata, interessi e differenze tra¬†
          **mutuo alla francese (rata costante)** e **all‚Äôitaliana (quota capitale costante)**.¬†¬†
          In pi√π puoi vedere qual √® la **rata massima sostenibile** in base al reddito.
        </p>
      </div>
  
      <button id="shareBtnTop" class="share-btn" type="button">
        üìé Condividi questa pagina
      </button>
  
      <section aria-label="Elenco calcolatori finanziari">
        <div class="calc-grid">
          <article class="calc-card">
            <div class="calc-card-label">CALCOLATORE #1</div>
            <h3>Finanziamento semplice</h3>
            <p>
              Inserisci importo, tasso annuo e anni: ottieni la rata mensile, il totale pagato e gli interessi.
              Utile per prestiti auto, arredamento, ecc.
            </p>
            <a href="#calc-finanziamento" class="calc-card-link">Vai al calcolatore</a>
          </article>
  
          <article class="calc-card">
            <div class="calc-card-label">CALCOLATORE #2</div>
            <h3>Mutuo con piano di ammortamento</h3>
            <p>
              Calcola il piano alla francese (rata costante) o all‚Äôitaliana (quota capitale costante),
              con dettaglio rata per rata.
            </p>
            <a href="#calc-mutuo" class="calc-card-link">Vai al calcolatore</a>
          </article>
  
          <article class="calc-card">
            <div class="calc-card-label">CALCOLATORE #3</div>
            <h3>Rata massima sostenibile</h3>
            <p>
              Inserisci il reddito mensile e la percentuale massima di rata: scopri la rata ‚Äúsalva-sonno‚Äù
              e il capitale che puoi permetterti.
            </p>
            <a href="#calc-budget" class="calc-card-link">Vai al calcolatore</a>
          </article>
        </div>
      </section>
  
      <section class="calc-section" id="calc-finanziamento">
        <h2>Calcolatore finanziamento semplice</h2>
        <p>
          Ipotizziamo un piano con rate mensili costanti.¬†¬†
          Inserisci l‚Äôimporto che ti serve, il tasso annuo nominale (TAN) e la durata in anni.
        </p>
  
        <div class="calc-grid-inputs">
          <div class="calc-field">
            <label for="finImporto">Importo da finanziare (‚Ç¨)</label>
            <input id="finImporto" type="number" min="500" max="200000" value="10000">
          </div>
  
          <div class="calc-field">
            <label for="finTasso">Tasso annuo (%)</label>
            <input id="finTasso" type="number" step="0.01" min="0" max="30" value="6">
          </div>
  
          <div class="calc-field">
            <label for="finAnni">Durata (anni)</label>
            <input id="finAnni" type="number" min="1" max="20" value="5">
          </div>
        </div>
  
        <button class="calc-btn" type="button" onclick="calcolaFinanziamento()">Calcola rata finanziamento</button>
  
        <div id="finResult" class="calc-result"></div>
  
        <p class="small-note">
          Il calcolo √® indicativo e non tiene conto di spese accessorie, imposte, assicurazioni o eventuali commissioni.
        </p>
      </section>
  
      <section class="calc-section" id="calc-budget">
        <h2>Calcolatore rata massima sostenibile</h2>
        <p>
          Partendo dal reddito mensile, puoi stimare una rata ‚Äúprudente‚Äù (ad esempio il 30% del reddito)
          e vedere a quale importo di finanziamento o mutuo potrebbe corrispondere.
        </p>
  
        <div class="calc-grid-inputs">
          <div class="calc-field">
            <label for="budReddito">Reddito mensile netto (‚Ç¨)</label>
            <input id="budReddito" type="number" min="500" max="20000" value="1800">
          </div>
  
          <div class="calc-field">
            <label for="budPercent">Quota massima rata (% del reddito)</label>
            <input id="budPercent" type="number" min="10" max="60" value="30">
          </div>
  
          <div class="calc-field">
            <label for="budTasso">Tasso annuo ipotizzato (%)</label>
            <input id="budTasso" type="number" step="0.01" min="0" max="20" value="4">
          </div>
  
          <div class="calc-field">
            <label for="budAnni">Durata (anni)</label>
            <input id="budAnni" type="number" min="1" max="40" value="20">
          </div>
        </div>
  
        <button class="calc-btn" type="button" onclick="calcolaBudgetRata()">Calcola rata sostenibile</button>
  
        <div id="budResult" class="calc-result"></div>
  
        <p class="small-note">
          √à una simulazione semplificata basata sul modello a rata costante.
          Nella realt√† banche e finanziarie valutano anche altre rate, spese fisse, numero di componenti in famiglia, ecc.
        </p>
      </section>
  
      <section class="calc-section" id="calc-mutuo">
        <h2>Calcolatore mutuo con piano di ammortamento</h2>
        <p>
          Puoi scegliere tra:
          <strong>ammortamento alla francese</strong> (rata costante, molto usato dalle banche)
          e <strong>ammortamento all‚Äôitaliana</strong> (quota capitale costante e rata decrescente).
          
        </p>
  
        <div class="calc-grid-inputs">
          <div class="calc-field">
            <label for="mutImporto">Importo mutuo (‚Ç¨)</label>
            <input id="mutImporto" type="number" min="10000" max="1000000" value="150000">
          </div>
  
          <div class="calc-field">
            <label for="mutTasso">Tasso annuo (%)</label>
            <input id="mutTasso" type="number" step="0.01" min="0" max="20" value="3">
          </div>
  
          <div class="calc-field">
            <label for="mutAnni">Durata (anni)</label>
            <input id="mutAnni" type="number" min="5" max="40" value="25">
          </div>
  
          <div class="calc-field">
            <label for="mutTipo">Tipo di piano</label>
            <select id="mutTipo">
              <option value="francese">Ammortamento alla francese (rata costante)</option>
              <option value="italiano">Ammortamento all‚Äôitaliana (quota capitale costante)</option>
            </select>
          </div>
        </div>
  
        <button class="calc-btn" type="button" onclick="calcolaMutuo()">Calcola piano mutuo</button>
  
        <div id="mutResult" class="calc-result"></div>
  
        <div style="text-align:center; margin:20px 0;">
          <button id="shareBtnBottom" class="share-btn" type="button" style="font-size:1rem;">
            üìé Condividi questa pagina
          </button>
        </div>
  
        <p class="small-note">
          Il piano √® semplificato a scopo informativo. Per un preventivo ufficiale e completo di tutte le spese
          √® sempre necessario rivolgersi a banca o consulente finanziario.
        </p>
      </section>
    </main>
  
  <div class="small-note" style="margin-top:20px; text-align: center; max-width: 1180px; margin-left: auto; margin-right: auto; padding: 0 20px;">
    I calcolatori presenti su questa pagina offrono stime orientative e non costituiscono
    consulenza finanziaria o offerta di credito. Per informazioni ufficiali rivolgersi
    all‚Äôistituto finanziario di riferimento.
  </div>
  
  
    <footer class="syncras-footer">
      <div class="footer-inner">
        <div class="footer-column">
          <h4>Syncras.App</h4>
          <p>
            Metodo SmartShop per fare acquisti con la testa (e con un po‚Äô di ironia).<br>
            Niente tecnicismi inutili, solo esperienze reali e numeri spiegati semplice.
          </p>
        </div>
  
        <div class="footer-column">
          <h4>Link utili</h4>
          <ul>
            <li><a href="blog.html">Tutte le guide SmartShop</a></li>
            <li><a href="offerte.html">Offerte Amazon selezionate</a></li>
            <li><a href="calcolatore-consumi-elettrodomestici.html">Calcolatore consumi elettrici</a></li>
            <li><a href="calcolatore-confronto-auto.html">Calcolatore confronto auto</a></li>
          </ul>
        </div>
  
        <div class="footer-column">
          <h4>Legale & Privacy</h4>
          <ul>
            <li><a href="privacy.html">Privacy Policy</a></li>
            <li><a href="cookie.html">Cookie Policy</a></li>
            <li><a href="disclaimer-amazon.html">Disclaimer Amazon</a></li>
            <li><a href="note-legali.html">Note Legali</a></li>
          </ul>
        </div>
      </div>
  
      <div class="footer-bottom">
        <p>¬© <span id="year-span"></span> Syncras.App ‚Äî Tutti i diritti riservati.</p>
        <p>
          Syncras.App partecipa al Programma Affiliazione Amazon EU.¬†¬†
          Acquistando tramite i link presenti nelle pagine, il sito pu√≤ ricevere una piccola commissione
          senza alcun costo aggiuntivo per l‚Äôutente.
        </p>
        <p>
          Per informazioni su ordini, resi, spedizioni o gestione dei dati relativi agli acquisti,
          √® necessario rivolgersi direttamente al servizio clienti Amazon tramite il proprio account.
        </p>
      </div>
    </footer>
  
    <script>
      // Funzione per mostrare/nascondere il menu mobile (Aggiornata per accessibilit√†)
      function toggleMenu() {
        const body = document.body;
        const nav = document.getElementById('main-nav');
        const button = document.getElementById('menuToggle');
        const isExpanded = button.getAttribute('aria-expanded') === 'true' || false;

        body.classList.toggle('nav-open');
        button.setAttribute('aria-expanded', !isExpanded);
        
        // Blocca lo scroll del body quando il menu √® aperto su mobile (opzionale)
        // if (!isExpanded) {
        //   body.style.overflow = 'hidden';
        // } else {
        //   body.style.overflow = '';
        // }
      }
      
      // Funzione di condivisione unificata
      function handleShare(event) {
          event.preventDefault();
          if (navigator.share) {
              navigator.share({
                  title: 'Calcolatore Rata Mutuo e Finanziamenti ‚Äì Syncras.App',
                  text: 'Ho provato questo calcolatore per capire rata, interessi e quanto mutuo posso permettermi.',
                  url: window.location.href
              }).catch(error => console.log('Errore nella condivisione', error));
          } else {
              // Fallback per browser desktop
              alert("Copia il link per condividere: " + window.location.href);
          }
      }

      // Parsing numeri: accetta sia virgola che punto
      function numFromInput(id) {
        const el = document.getElementById(id);
        if (!el) return 0;
        const raw = (el.value || '').replace(',', '.');
        const n = parseFloat(raw);
        return isNaN(n) ? 0 : n;
      }
  
      // FORMATTAZIONE EURO
      function euro(val) {
        return val.toFixed(2).replace('.', ',');
      }
      
      // Funzione di arrotondamento (per evitare errori di virgola mobile)
      function round(num, precision = 6) {
          const factor = Math.pow(10, precision);
          return Math.round(num * factor) / factor;
      }
  
      // === FINANZIAMENTO SEMPLICE (rate mensili costanti) ===
      function calcolaFinanziamento() {
        const importo = numFromInput('finImporto');
        const tassoAnn = numFromInput('finTasso'); // %
        const anni = numFromInput('finAnni');
  
        if (importo <= 0 || anni <= 0) {
          alert('Inserisci un importo e una durata maggiori di zero.');
          return;
        }
  
        const n = anni * 12; // numero rate
        const r = tassoAnn > 0 ? (tassoAnn / 100) / 12 : 0; // tasso mensile
  
        let rata;
        if (r === 0) {
          rata = importo / n;
        } else {
          // formula rata ammortamento alla francese
          const pow = Math.pow(1 + r, n);
          rata = importo * r * pow / (pow - 1);
        }
  
        const totalePagato = rata * n;
        const interessi = totalePagato - importo;
  
        const box = document.getElementById('finResult');
        box.innerHTML = `
          <h4>Riepilogo Finanziamento</h4>
          <p>Importo finanziato: <strong>${euro(importo)} ‚Ç¨</strong></p>
          <p>Rata mensile stimata: <strong>${euro(rata)} ‚Ç¨</strong> per <strong>${n}</strong> mesi.</p>
          <p style="font-size: 1.1rem; color: var(--violet-dark); font-weight: bold;">
              Totale pagato: ~${euro(totalePagato)} ‚Ç¨
          </p>
          <p>Interessi complessivi: ~<strong>${euro(interessi)} ‚Ç¨</strong></p>
          <p class="small-note">
            Calcolo con rata costante (ammortamento alla francese) e tasso fisso.
            Le condizioni reali possono variare in base a TAN, TAEG e spese accessorie.
          </p>
        `;
        box.style.display = 'block';
      }
  
      // === BUDGET RATA SOSTENIBILE ===
      function calcolaBudgetRata() {
        const reddito = numFromInput('budReddito');
        const perc = numFromInput('budPercent'); // %
        const tassoAnn = numFromInput('budTasso');
        const anni = numFromInput('budAnni');
  
        if (reddito <= 0 || anni <= 0 || perc <= 0) {
          alert('Inserisci reddito, percentuale e durata maggiori di zero.');
          return;
        }
  
        const rataMax = reddito * (perc / 100); // rata mensile consigliata
        const n = anni * 12;
        const r = tassoAnn > 0 ? (tassoAnn / 100) / 12 : 0;
  
        let capitaleMax;
        if (r === 0) {
          capitaleMax = rataMax * n;
        } else {
          // formula inversa della rata francese: P = R * ((1+r)^n - 1) / (r * (1+r)^n)
          const pow = Math.pow(1 + r, n);
          capitaleMax = rataMax * (pow - 1) / (r * pow);
        }
  
        const totalePagato = rataMax * n;
        const interessi = totalePagato - capitaleMax;
  
        const box = document.getElementById('budResult');
        box.innerHTML = `
          <h4>Riepilogo Budget Rata</h4>
          <p>Reddito mensile netto: <strong>${euro(reddito)} ‚Ç¨</strong></p>
          <p>Rata massima sostenibile al <strong>${perc}%</strong>:
            ~<strong>${euro(rataMax)} ‚Ç¨ / mese</strong></p>
          <p>Durata ipotizzata: <strong>${anni} anni</strong> | Tasso: <strong>${tassoAnn.toString().replace('.', ',')} %</strong></p>
          <hr>
          <p style="font-size: 1.1rem; color: var(--violet-dark); font-weight: bold;">
            Importo massimo finanziabile (stima): ~<strong>${euro(capitaleMax)} ‚Ç¨</strong>
          </p>
          <p>
            Totale pagato in ${n} rate: ~<strong>${euro(totalePagato)} ‚Ç¨</strong><br>
            Interessi complessivi stimati: ~<strong>${euro(interessi)} ‚Ç¨</strong>
          </p>
          <p class="small-note">
            Stima basata su ammortamento alla francese a rata costante. Non tiene conto di altre rate gi√† in corso, spese fisse, TAEG o possibili variazioni di tasso.
          </p>
        `;
        box.style.display = 'block';
      }
  
      // === MUTUO CON PIANO DI AMMORTAMENTO ===
      function calcolaMutuo() {
        const importo = numFromInput('mutImporto');
        const tassoAnn = numFromInput('mutTasso');
        const anni = numFromInput('mutAnni');
        const tipo = document.getElementById('mutTipo').value;
  
        if (importo <= 0 || anni <= 0) {
          alert('Inserisci un importo e una durata maggiori di zero.');
          return;
        }
  
        const n = anni * 12; // numero rate
        const r = tassoAnn > 0 ? (tassoAnn / 100) / 12 : 0; // tasso mensile
  
        let rows = '';
        let totaleInteressi = 0;
        let rataIniziale = 0;
  
        let capitaleResiduo = importo;
        let quotaCapitaleCostante = 0;
  
        if (tipo === 'francese') {
          // 1. Calcolo rata costante
          if (r === 0) {
            rataIniziale = importo / n;
          } else {
            const pow = Math.pow(1 + r, n);
            rataIniziale = round(importo * r * pow / (pow - 1));
          }
          
          for (let k = 1; k <= n; k++) {
            const interesse = round(r * capitaleResiduo);
            let quotaCapitale = round(rataIniziale - interesse);

            // Regola della differenza per l'ultima rata
            if (k === n) {
                quotaCapitale = capitaleResiduo;
                rataIniziale = round(quotaCapitale + interesse); // L'ultima rata si adegua
            }
            
            capitaleResiduo -= quotaCapitale;
            totaleInteressi += interesse;
  
            rows += `
              <tr>
                <td>${k}</td>
                <td>${euro(rataIniziale)}</td>
                <td>${euro(quotaCapitale)}</td>
                <td>${euro(interesse)}</td>
                <td>${euro(Math.max(capitaleResiduo, 0))}</td>
              </tr>
            `;
          }
        } else {
          // all‚Äôitaliana: quota capitale costante
          quotaCapitaleCostante = round(importo / n);
          
          for (let k = 1; k <= n; k++) {
            const interesse = round(r * capitaleResiduo);
            const rata = round(quotaCapitaleCostante + interesse);
            
            // Regola della differenza per l'ultima rata
            if (k === n) {
                quotaCapitaleCostante = capitaleResiduo;
            }
            
            if (k === 1) {
              rataIniziale = rata; // Prima rata (la pi√π alta)
            }
            
            capitaleResiduo -= quotaCapitaleCostante;
            totaleInteressi += interesse;
  
            rows += `
              <tr>
                <td>${k}</td>
                <td>${euro(rata)}</td>
                <td>${euro(quotaCapitaleCostante)}</td>
                <td>${euro(interesse)}</td>
                <td>${euro(Math.max(capitaleResiduo, 0))}</td>
              </tr>
            `;
          }
        }
  
        const totalePagato = importo + totaleInteressi;
  
        const titoloPiano = (tipo === 'francese')
          ? 'Piano di ammortamento alla francese (Rata costante)'
          : 'Piano di ammortamento all‚Äôitaliana (Quota capitale costante)';
  
        const box = document.getElementById('mutResult');
        box.innerHTML = `
          <h4>${titoloPiano}</h4>
          <p>Importo mutuo: <strong>${euro(importo)} ‚Ç¨</strong></p>
          <p>
            Durata: <strong>${anni} anni</strong> (${n} rate mensili) | Tasso annuo: <strong>${tassoAnn.toString().replace('.', ',')} %</strong>
          </p>
          <hr>
          <p>
            ${tipo === 'francese'
              ? `Rata mensile costante: ~<strong>${euro(rataIniziale)} ‚Ç¨</strong>`
              : `Prima rata mensile: ~<strong>${euro(rataIniziale)} ‚Ç¨</strong> (poi decrescente)`
            }<br>
            Totale interessi pagati: ~<strong>${euro(totaleInteressi)} ‚Ç¨</strong>
          </p>
          <p style="font-size: 1.1rem; color: var(--violet-dark); font-weight: bold;">
             Totale complessivo rimborsato: ~${euro(totalePagato)} ‚Ç¨
          </p>
  
          <table>
            <thead>
              <tr>
                <th># Rata</th>
                <th>Rata (‚Ç¨)</th>
                <th>Quota capitale (‚Ç¨)</th>
                <th>Quota interessi (‚Ç¨)</th>
                <th>Capitale residuo (‚Ç¨)</th>
              </tr>
            </thead>
            <tbody>
              ${rows}
            </tbody>
          </table>
  
          <p class="small-note">
            Piano calcolato in modo mensile e puramente didattico: non considera eventuali arrotondamenti bancari,
            variazioni di tasso (mutui variabili), spese accessorie o imposte.
          </p>
        `;
        box.style.display = 'block';
      }
  
      document.addEventListener('DOMContentLoaded', function() {
        // FOOTER YEAR
        document.getElementById('year-span').textContent = new Date().getFullYear();
        
        // CONDIVISIONE (collegamento)
        document.getElementById('shareBtnTop').addEventListener('click', handleShare);
        document.getElementById('shareBtnBottom').addEventListener('click', handleShare);
        
        // MENU MOBILE
        document.getElementById('menuToggle').addEventListener('click', toggleMenu);
      });
    </script>
</body>
</html>


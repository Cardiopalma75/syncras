# üìÑ FILE: ga_under_over_analysis.md

## Obiettivo
Calcolare **statisticamente** la probabilit√† di **Under / Over 2.5** di una partita  
in base **ESCLUSIVAMENTE** a:
- gol subiti delle squadre (GA)
- dati reali storici
- quote pre-match (solo come contesto, non previsione)

‚ùó Non predittivo, **analitico**.

---

## 1Ô∏è‚É£ Dati richiesti (CSV)

### A) `results_unified_top_leagues.csv`
Campi minimi necessari:
```
Date
HomeTeam
AwayTeam
FTHG
FTAG
```

### B) `prequotes_b365_unified_top_leagues.csv`
Campi minimi:
```
Date
HomeTeam
AwayTeam
b365_1
b365_x
b365_2
b365_u25 (opzionale)
b365_o25 (opzionale)
```

---

## 2Ô∏è‚É£ Definizioni (IMPORTANTISSIMO)

### Gol Subiti (GA)
- **GA_home** = media gol subiti dalla squadra di casa negli ultimi N match
- **GA_away** = media gol subiti dalla squadra ospite negli ultimi N match

```
GA_match = (GA_home + GA_away) / 2
```

üìå **N = 15 match precedenti** (default, modificabile)

---

### Under / Over 2.5 reale
```
TotGoals = FTHG + FTAG

if TotGoals <= 2 ‚Üí Under 2.5
if TotGoals >= 3 ‚Üí Over 2.5
```

---

## 3Ô∏è‚É£ Costruzione delle FASCE GA (range)

Le partite vengono raggruppate per **GA_match**:

```
GA ‚â§ 0.80
0.80 ‚Äì 1.00
1.00 ‚Äì 1.20
1.20 ‚Äì 1.40
1.40 ‚Äì 1.60
> 1.60
```

üìå Ogni fascia √® **un cluster statistico**, non un giudizio.

---

## 4Ô∏è‚É£ Output PRINCIPALE (quello che ti serve davvero)

Tabella finale:

```
GA_range | N | Under_% | Over_% | Under_count | Over_count
```

Esempio:
```
0.80‚Äì1.00 | 184 | 58.7% | 41.3% | 108 | 76
```

üëâ Questo significa:
> Quando il GA medio delle due squadre √® tra 0.8 e 1.0, l‚ÄôUnder 2.5 esce ~59% delle volte.

---

## 5Ô∏è‚É£ Integrazione con le QUOTE (facoltativa ma utile)

Una volta calcolata la tabella GA, puoi **incrociare** con:

### A) Quota X
```
X 2.75‚Äì3.25
X 3.25‚Äì3.75
X 3.75‚Äì4.25
X > 4.25
```

### B) Spread |1‚Äì2|
```
|quota1 ‚Äì quota2|
```

Output incrociato:
```
GA_range | X_range | N | Under_% | Over_%
```

üìå Qui nasce il contesto utile (es. Under sottovalutato con X media).

---

## 6Ô∏è‚É£ Come selezionare le PARTITE DA ATTENZIONARE

Per ogni match futuro:

1. calcoli `GA_match`
2. individui la **fascia GA**
3. leggi la % Under/Over storica
4. confronti con la quota bookmaker (se presente)

Esempio:
```
GA_match = 0.92 ‚Üí fascia 0.80‚Äì1.00 ‚Üí Under storico 58%
Quota Under = 2.10 (‚âà47%)
```

üëâ Under statisticamente ‚Äúpi√π alto‚Äù del prezzo mercato.

‚ö†Ô∏è Non √® ‚Äúgioca Under‚Äù, √®:
> match con profilo Under superiore alla media

---

## 7Ô∏è‚É£ Cosa NON fa questo file (volutamente)
‚ùå non predice risultati  
‚ùå non usa ML  
‚ùå non garantisce esiti  
‚ùå non usa grafici  

‚úÖ solo statistica reale + confronto mercato

---

## 8Ô∏è‚É£ Perch√© questo √® utile anche per le X
- GA medio-basso = partite chiuse
- GA medio = X + Under convivono meglio
- GA alto = X ‚Äústretta‚Äù muore in Over

üëâ prima capisci Under/Over, poi la X diventa pi√π le
